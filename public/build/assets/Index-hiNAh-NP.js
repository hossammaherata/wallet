import{i as D,Q as N,T as U,c as v,w as s,o as _,a as r,u as e,Z as F,G,m as I,A as b,h as i,t as l,v as L,f as n,B as P,I as R,l as W,p as g,d as k,y,n as Y,e as h,Y as j,k as q,q as w}from"./app-BpXjbCMW.js";import{L as A}from"./main-B236rcsx.js";import{P as E}from"./page-header-DEyyf2_K.js";import{_ as H}from"./card-header-Ct8audyA.js";import{S as f}from"./sweetalert2.all-BXeenfYg.js";import"./simplebar-vue.esm-Ds3EkmLx.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-Bc94pPwb.js";import"./us-DIspYScJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M=n("i",{class:"ri-add-line align-middle me-1"},null,-1),Q={class:"mb-3 d-flex gap-2 align-items-center"},Z={class:"form-label mb-0"},J={value:"user"},K={value:"store"},O={value:"prize_manager"},X={class:"mb-3"},ee={class:"text-muted"},te={class:"table-responsive"},ae={class:"fw-bold"},se={key:1,class:"text-muted"},le={key:0,class:"d-flex justify-content-center mt-3"},ve={__name:"Index",setup(re){const{t}=D(),{users:c,keyword:S,type:C}=N().props,d=U({page:1,keyword:S||"",type:C||"user"}),m=(o,u)=>{d.page=u||d.page,d.get(route("admin.users.index"),{},{preserveState:!0})},x=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=o=>parseFloat(o||0).toFixed(2),z=o=>{f.fire({title:t("t-are-you-sure"),text:t("t-wont-be-able-to-revert"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:t("t-yes-delete-it")}).then(u=>{u.isConfirmed&&w.delete(route("admin.users.destroy",o),{onSuccess:()=>{m(),f.fire(t("t-deleted"),t("t-user-has-been-deleted"),"success")}})})},V=(o,u)=>{const a=u==="active"?"suspended":"active";w.post(route("admin.users.updateStatus",o),{status:a},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{m(),f.fire(t("t-success"),t("t-user-status-updated"),"success")}})},T=(o,u)=>{const a=u==="active"?"locked":"active";w.post(route("admin.users.updateWalletStatus",o),{status:a},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{m();const p=t(a==="locked"?"t-locked":"t-active");f.fire(t("t-success"),`${t("t-wallet-status-updated")} ${p}`,"success")}})},$=()=>{d.keyword="",d.page=1,d.get(route("admin.users.index"),{},{preserveState:!0})};return(o,u)=>(_(),v(A,null,{default:s(()=>[r(e(F),{title:e(t)("t-users")},null,8,["title"]),r(E,{title:e(t)("t-users"),pageTitle:e(t)("t-users-management")},null,8,["title","pageTitle"]),r(e(q),null,{default:s(()=>[r(e(G),{lg:"12"},{default:s(()=>[r(e(I),{"no-body":""},{default:s(()=>[r(H,{title:e(t)("t-users-list"),model:e(d),SearchButton:"true",onGetResourese:m,onReset:$},{actions:s(()=>[r(e(b),{href:o.route("admin.users.create"),class:"btn btn-primary"},{default:s(()=>[M,i(" "+l(e(t)("t-add-new-user")),1)]),_:1},8,["href"])]),_:1},8,["title","model"]),r(e(L),null,{default:s(()=>[n("div",Q,[n("label",Z,l(e(t)("t-filter-by-type"))+":",1),P(n("select",{"onUpdate:modelValue":u[0]||(u[0]=a=>e(d).type=a),onChange:m,class:"form-select",style:{width:"auto"}},[n("option",J,l(e(t)("t-regular-users")),1),n("option",K,l(e(t)("t-stores")),1),n("option",O,l(e(t)("t-prize-managers")),1)],544),[[R,e(d).type]])]),n("div",X,[n("span",ee,[i(l(e(t)("t-total-users"))+": ",1),n("strong",null,l(e(c).total),1)])]),n("div",te,[r(e(W),{striped:"",hover:"",items:e(c).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"name",label:e(t)("t-name"),sortable:!0},{key:"type",label:e(t)("t-type"),sortable:!0},{key:"phone",label:e(t)("t-phone"),sortable:!0},{key:"email",label:e(t)("t-email"),sortable:!0},{key:"balance",label:e(t)("t-balance"),sortable:!0},{key:"status",label:e(t)("t-status"),sortable:!0},{key:"wallet_status",label:e(t)("t-wallet-status"),sortable:!0},{key:"created_at",label:e(t)("t-created-at"),sortable:!0},{key:"actions",label:e(t)("t-actions")}],class:"table-nowrap"},{"cell(row_number)":s(({index:a})=>[i(l((e(c).current_page-1)*e(c).per_page+a+1),1)]),"cell(type)":s(({item:a})=>[r(e(g),{variant:a.type==="store"?"warning":a.type==="prize_manager"?"info":"primary"},{default:s(()=>[i(l(a.type==="store"?e(t)("t-store"):a.type==="prize_manager"?e(t)("t-prize-manager"):e(t)("t-regular-user")),1)]),_:2},1032,["variant"])]),"cell(balance)":s(({item:a})=>{var p;return[n("span",ae,l(B((p=a.wallet)==null?void 0:p.balance))+" "+l(e(t)("t-points")),1)]}),"cell(status)":s(({item:a})=>[r(e(g),{variant:a.status==="active"?"success":"danger"},{default:s(()=>[i(l(a.status==="active"?e(t)("t-active"):e(t)("t-suspended")),1)]),_:2},1032,["variant"])]),"cell(wallet_status)":s(({item:a})=>[a.wallet?(_(),v(e(g),{key:0,variant:a.wallet.status==="active"?"success":"danger"},{default:s(()=>[i(l(a.wallet.status==="active"?e(t)("t-active"):e(t)("t-locked")),1)]),_:2},1032,["variant"])):(_(),k("span",se,"-"))]),"cell(created_at)":s(({item:a})=>[i(l(x(a.created_at)),1)]),"cell(actions)":s(({item:a})=>[r(e(b),{href:o.route("admin.users.show",a.id),class:"btn btn-outline-primary btn-sm me-1"},{default:s(()=>[i(l(e(t)("t-view")),1)]),_:2},1032,["href"]),r(e(b),{href:o.route("admin.users.edit",a.id),class:"btn btn-outline-primary btn-sm me-1"},{default:s(()=>[i(l(e(t)("t-edit")),1)]),_:2},1032,["href"]),r(e(y),{variant:"outline-warning",size:"sm",class:"me-1",onClick:p=>V(a.id,a.status)},{default:s(()=>[i(l(a.status==="active"?e(t)("t-suspend"):e(t)("t-activate")),1)]),_:2},1032,["onClick"]),a.wallet?(_(),v(e(y),{key:0,variant:a.wallet.status==="active"?"outline-warning":"outline-success",size:"sm",class:"me-1",onClick:p=>T(a.id,a.wallet.status)},{default:s(()=>[n("i",{class:Y(a.wallet.status==="active"?"ri-lock-line":"ri-lock-unlock-line")},null,2),i(" "+l(a.wallet.status==="active"?e(t)("t-lock-wallet"):e(t)("t-unlock-wallet")),1)]),_:2},1032,["variant","onClick"])):h("",!0),r(e(y),{variant:"outline-danger",size:"sm",onClick:p=>z(a.id)},{default:s(()=>[i(l(e(t)("t-delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["items","fields"])]),e(c).last_page>1?(_(),k("div",le,[r(e(j),{modelValue:e(c).current_page,"onUpdate:modelValue":u[1]||(u[1]=a=>e(c).current_page=a),"total-rows":e(c).total,"per-page":e(c).per_page,onPageClick:m},null,8,["modelValue","total-rows","per-page"])])):h("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ve as default};
