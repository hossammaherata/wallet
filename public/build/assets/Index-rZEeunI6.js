import{Q as P,T as U,c as v,w as a,o as _,a as o,u as t,Z as B,G as p,m as N,k as L,f as s,l as b,i as h,C as y,D as k,p as w,h as d,t as i,q as R,d as m,s as g,n as I,e as x,j as M,Y}from"./app-p6nL2sIh.js";import{L as j}from"./main-DD0YxTIO.js";import{P as z}from"./page-header-D_lLMvKR.js";import{_ as E}from"./card-header-7vgZfBgl.js";import"./simplebar-vue.esm-Dfq80Hnp.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-BfYujB8V.js";import"./russia-pMTSjNGF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"mb-4"},q={class:"mb-3"},H=s("label",{class:"form-label"},"Search",-1),Q={class:"mb-3"},Z=s("label",{class:"form-label"},"Status",-1),$=s("option",{value:""},"All",-1),J=s("option",{value:"success"},"Success",-1),K=s("option",{value:"pending"},"Pending",-1),O=s("option",{value:"failed"},"Failed",-1),W={class:"mb-3"},X=s("label",{class:"form-label"},"Type",-1),ee=s("option",{value:""},"All",-1),te=s("option",{value:"purchase"},"Purchase",-1),se=s("option",{value:"transfer"},"Transfer",-1),ae=s("option",{value:"credit"},"Credit",-1),oe={class:"mb-3"},le=s("label",{class:"form-label"},"Date From",-1),ne={class:"mb-3"},re=s("label",{class:"form-label"},"Date To",-1),de={class:"mb-3"},ie=s("i",{class:"ri-search-line me-1"},null,-1),ce=s("i",{class:"ri-refresh-line me-1"},null,-1),ue={class:"mb-3"},_e={class:"text-muted"},pe={class:"table-responsive"},me={key:0},fe=s("br",null,null,-1),be={class:"text-muted"},he={key:0},ye=s("br",null,null,-1),ge={class:"text-muted"},ve={key:1,class:"text-muted"},ke={key:0,class:"ri-arrow-down-line text-success"},we={key:1,class:"ri-arrow-up-line text-danger"},xe={key:0,class:"d-flex justify-content-center mt-3"},Ne={__name:"Index",setup(Te){const{transactions:u,filters:r}=P().props,l=U({page:1,keyword:(r==null?void 0:r.keyword)||"",status:(r==null?void 0:r.status)||"",type:(r==null?void 0:r.type)||"",date_from:(r==null?void 0:r.date_from)||"",date_to:(r==null?void 0:r.date_to)||""}),T=(c,n)=>{l.page=n||l.page,l.get(route("admin.transactions.index"),{},{preserveState:!0})},V=()=>{l.page=1,l.get(route("admin.transactions.index"),{},{preserveState:!0})},S=()=>{l.keyword="",l.status="",l.type="",l.date_from="",l.date_to="",l.page=1,l.get(route("admin.transactions.index"),{},{preserveState:!0})},D=c=>new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),C=c=>parseFloat(c||0).toFixed(2),F=c=>({success:"success",pending:"warning",failed:"danger"})[c]||"secondary",A=c=>({purchase:"primary",transfer:"info",credit:"success",refund:"warning"})[c]||"secondary";return(c,n)=>(_(),v(j,null,{default:a(()=>[o(t(B),{title:"Transactions"}),o(z,{title:"Transactions",pageTitle:"Transactions Management"}),o(t(b),null,{default:a(()=>[o(t(p),{lg:"12"},{default:a(()=>[o(t(N),{"no-body":""},{default:a(()=>[o(E,{title:"Transactions List"}),o(t(L),null,{default:a(()=>[s("div",G,[o(t(b),null,{default:a(()=>[o(t(p),{md:"3"},{default:a(()=>[s("div",q,[H,h(s("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>t(l).keyword=e),type:"text",class:"form-control",placeholder:"Reference ID, Name, Phone..."},null,512),[[y,t(l).keyword]])])]),_:1}),o(t(p),{md:"2"},{default:a(()=>[s("div",Q,[Z,o(t(k),{modelValue:t(l).status,"onUpdate:modelValue":n[1]||(n[1]=e=>t(l).status=e)},{default:a(()=>[$,J,K,O]),_:1},8,["modelValue"])])]),_:1}),o(t(p),{md:"2"},{default:a(()=>[s("div",W,[X,o(t(k),{modelValue:t(l).type,"onUpdate:modelValue":n[2]||(n[2]=e=>t(l).type=e)},{default:a(()=>[ee,te,se,ae]),_:1},8,["modelValue"])])]),_:1}),o(t(p),{md:"2"},{default:a(()=>[s("div",oe,[le,h(s("input",{"onUpdate:modelValue":n[3]||(n[3]=e=>t(l).date_from=e),type:"date",class:"form-control"},null,512),[[y,t(l).date_from]])])]),_:1}),o(t(p),{md:"2"},{default:a(()=>[s("div",ne,[re,h(s("input",{"onUpdate:modelValue":n[4]||(n[4]=e=>t(l).date_to=e),type:"date",class:"form-control"},null,512),[[y,t(l).date_to]])])]),_:1})]),_:1}),o(t(b),null,{default:a(()=>[o(t(p),{md:"12"},{default:a(()=>[s("div",de,[o(t(w),{variant:"primary",onClick:V,class:"me-2"},{default:a(()=>[ie,d(" Apply Filters ")]),_:1}),o(t(w),{variant:"secondary",onClick:S},{default:a(()=>[ce,d(" Reset ")]),_:1})])]),_:1})]),_:1})]),s("div",ue,[s("span",_e,[d("Total Transactions: "),s("strong",null,i(t(u).total),1)])]),s("div",pe,[o(t(R),{striped:"",hover:"",items:t(u).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"reference_id",label:"Reference ID",sortable:!0},{key:"from_user",label:"From",sortable:!1},{key:"to_user",label:"To",sortable:!1},{key:"amount",label:"Amount",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"created_at",label:"Created At",sortable:!0},{key:"actions",label:"Actions"}],class:"table-nowrap"},{"cell(row_number)":a(({index:e})=>[d(i((t(u).current_page-1)*t(u).per_page+e+1),1)]),"cell(reference_id)":a(({item:e})=>[s("code",null,i(e.reference_id),1)]),"cell(from_user)":a(({item:e})=>{var f;return[(f=e.from_wallet)!=null&&f.user?(_(),m("span",me,[d(i(e.from_wallet.user.name),1),fe,s("small",be,i(e.from_wallet.user.phone),1)])):(_(),v(t(g),{key:1,variant:"secondary"},{default:a(()=>[d("SYSTEM")]),_:1}))]}),"cell(to_user)":a(({item:e})=>{var f;return[(f=e.to_wallet)!=null&&f.user?(_(),m("span",he,[d(i(e.to_wallet.user.name),1),ye,s("small",ge,i(e.to_wallet.user.phone),1)])):(_(),m("span",ve,"-"))]}),"cell(amount)":a(({item:e})=>[s("span",{class:I(["fw-bold",{"text-success":e.is_credit||e.has_credit&&!e.has_debit,"text-danger":e.is_debit||e.has_debit&&!e.has_credit}])},[e.is_credit||e.has_credit&&!e.has_debit?(_(),m("i",ke)):e.is_debit||e.has_debit&&!e.has_credit?(_(),m("i",we)):x("",!0),d(" "+i(e.display_amount||C(e.amount))+" Points ",1)],2)]),"cell(type)":a(({item:e})=>[o(t(g),{variant:A(e.type)},{default:a(()=>[d(i(e.type),1)]),_:2},1032,["variant"])]),"cell(status)":a(({item:e})=>[o(t(g),{variant:F(e.status)},{default:a(()=>[d(i(e.status),1)]),_:2},1032,["variant"])]),"cell(created_at)":a(({item:e})=>[d(i(D(e.created_at)),1)]),"cell(actions)":a(({item:e})=>[o(t(M),{href:c.route("admin.transactions.show",e.id),class:"btn btn-info btn-sm"},{default:a(()=>[d(" View ")]),_:2},1032,["href"])]),_:1},8,["items"])]),t(u).last_page>1?(_(),m("div",xe,[o(t(Y),{modelValue:t(u).current_page,"onUpdate:modelValue":n[5]||(n[5]=e=>t(u).current_page=e),"total-rows":t(u).total,"per-page":t(u).per_page,onPageClick:T},null,8,["modelValue","total-rows","per-page"])])):x("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Ne as default};
