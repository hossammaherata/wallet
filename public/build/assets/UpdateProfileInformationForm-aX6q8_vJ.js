import{T as j,b,r as E,c as C,w as n,o as d,d as g,f as t,a,i as y,M as k,N as F,h as p,B as P,e as f,t as q,u as s,n as v,j as A,x as D}from"./app-DcM7ay-z.js";import{_ as R}from"./FormSection-PpVPp83Y.js";import{_ as w}from"./InputError-BKAwBL3U.js";import{_}from"./InputLabel-C4ss8d_i.js";import{_ as V}from"./TextInput--Umd6Zjn.js";const T={key:0,class:"mb-3"},z={class:"mb-2"},L={class:"mb-2"},M=["src","alt"],O={class:"text-danger mt-2"},Y={class:"mb-3"},G={class:"mb-3"},H={class:"mb-3"},J={key:0},K={class:"text-sm mt-2 text-muted"},Q={class:"alert alert-success text-success"},W={key:0,class:"alert alert-info mt-3"},ae={__name:"UpdateProfileInformationForm",props:{user:Object},setup(i){const h=i,e=j({_method:"PUT",name:h.user.name,user_name:h.user.user_name,email:h.user.email,photo:null}),S=b(null),u=b(null),r=b(null),x=()=>{r.value&&(e.photo=r.value.files[0]),e.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>B()})},N=()=>{S.value=!0},U=()=>{r.value.click()},I=()=>{const o=r.value.files[0];if(!o)return;const l=new FileReader;l.onload=m=>{u.value=m.target.result},l.readAsDataURL(o)},$=()=>{D.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{u.value=null,B()}})},B=()=>{var o;(o=r.value)!=null&&o.value&&(r.value.value=null)};return(o,l)=>{const m=E("BButton");return d(),C(R,{onSubmitted:x,title:"Profile Information",description:"Update your account's profile information and email address."},{form:n(()=>[o.$page.props.jetstream.managesProfilePhotos?(d(),g("div",T,[t("div",z,[t("input",{ref_key:"photoInput",ref:r,type:"file",class:"d-none form-control",onChange:I},null,544),a(_,{for:"photo",value:"Photo"})]),t("div",L,[y(t("div",null,[t("img",{src:i.user.profile_photo_url,alt:i.user.name,class:"rounded-circle",width:"100"},null,8,M)],512),[[k,!u.value]]),y(t("div",null,[t("span",{class:"d-block rounded-circle w-25",style:F("background-image: url('"+u.value+"');")},null,4)],512),[[k,u.value]])]),a(m,{variant:"primary",class:"me-2 btn-sm",type:"button",onClick:P(U,["prevent"])},{default:n(()=>[p("Select A New Photo")]),_:1}),i.user.profile_photo_path?(d(),C(m,{key:0,variant:"danger",type:"button",class:"btn-sm",onClick:P($,["prevent"])},{default:n(()=>[p("Remove Photo")]),_:1})):f("",!0),t("div",O,[t("span",null,q(s(e).errors.photo),1)])])):f("",!0),t("div",Y,[a(_,{for:"name",value:"Name"}),a(V,{id:"name",modelValue:s(e).name,"onUpdate:modelValue":l[0]||(l[0]=c=>s(e).name=c),type:"text",required:"",autocomplete:"name",class:v({"is-invalid":s(e).errors.name})},null,8,["modelValue","class"]),a(w,{message:s(e).errors.name,class:"mt-2"},null,8,["message"])]),t("div",G,[a(_,{for:"user_name",value:"Username"}),a(V,{id:"user_name",modelValue:s(e).user_name,"onUpdate:modelValue":l[1]||(l[1]=c=>s(e).user_name=c),type:"text",required:"",autocomplete:"username",class:v({"is-invalid":s(e).errors.user_name})},null,8,["modelValue","class"]),a(w,{message:s(e).errors.user_name,class:"mt-2"},null,8,["message"])]),t("div",H,[a(_,{for:"email",value:"Email"}),a(V,{id:"email",modelValue:s(e).email,"onUpdate:modelValue":l[2]||(l[2]=c=>s(e).email=c),type:"email",required:"",autocomplete:"username",class:v({"is-invalid":s(e).errors.email})},null,8,["modelValue","class"]),a(w,{message:s(e).errors.email,class:"mt-2"},null,8,["message"]),o.$page.props.jetstream.hasEmailVerification&&i.user.email_verified_at===null?(d(),g("div",J,[t("p",K,[p(" Your email address is unverified. "),a(s(A),{href:o.route("verification.send"),method:"post",as:"button",class:"btn btn-sm btn-warning",onClick:P(N,["prevent"])},{default:n(()=>[p(" Click here to re-send the verification email. ")]),_:1},8,["href"])]),y(t("div",Q," A new verification link has been sent to your email address. ",512),[[k,S.value]])])):f("",!0)])]),actions:n(()=>[a(m,{variant:"success w-100",type:"submit",class:v({"opacity-25":s(e).processing}),disabled:s(e).processing},{default:n(()=>[p("Save")]),_:1},8,["class","disabled"]),s(e).recentlySuccessful?(d(),g("p",W,"Profile Saved.")):f("",!0)]),_:1})}}};export{ae as default};
