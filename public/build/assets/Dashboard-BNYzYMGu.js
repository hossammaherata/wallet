import{Q as j,I as w,c as V,w as s,o as d,a,u as t,Z as R,G as _,m as u,k as m,f as e,t as r,l as v,p as C,h as p,d as i,q as I,e as f,n as N,Y as U,y as B,a5 as P,a6 as F}from"./app-p6nL2sIh.js";import{L}from"./main-DD0YxTIO.js";import{P as A}from"./page-header-D_lLMvKR.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./simplebar-vue.esm-Dfq80Hnp.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-BfYujB8V.js";import"./russia-pMTSjNGF.js";const o=h=>(P("data-v-cdaa65d1"),h=h(),F(),h),T=o(()=>e("div",{class:"d-flex align-items-center justify-content-center mb-3"},[e("div",{class:"avatar-sm mx-auto"},[e("div",{class:"avatar-title bg-primary-subtle text-primary rounded-circle fs-22"},[e("i",{class:"ri-money-dollar-circle-line"})])])],-1)),Y={class:"mb-1"},$=o(()=>e("p",{class:"text-muted mb-0"},"إجمالي المدفوعات",-1)),z=o(()=>e("div",{class:"d-flex align-items-center justify-content-center mb-3"},[e("div",{class:"avatar-sm mx-auto"},[e("div",{class:"avatar-title bg-success-subtle text-success rounded-circle fs-22"},[e("i",{class:"ri-file-list-line"})])])],-1)),E={class:"mb-1"},H=o(()=>e("p",{class:"text-muted mb-0"},"عدد المعاملات",-1)),W=o(()=>e("div",{class:"d-flex align-items-center justify-content-center mb-3"},[e("div",{class:"avatar-sm mx-auto"},[e("div",{class:"avatar-title bg-info-subtle text-info rounded-circle fs-22"},[e("i",{class:"ri-wallet-line"})])])],-1)),Z={class:"mb-1"},J=o(()=>e("p",{class:"text-muted mb-0"},"الرصيد الحالي (دين على الإدارة)",-1)),K={class:"d-flex align-items-center justify-content-between mb-3"},M=o(()=>e("h5",{class:"card-title mb-0"},"QR Code للمتجر",-1)),O=o(()=>e("i",{class:"ri-download-line me-1"},null,-1)),X=o(()=>e("i",{class:"ri-printer-line me-1"},null,-1)),ee={class:"text-center p-4 bg-light rounded"},te={class:"mb-3"},se=["src"],ae={class:"text-muted mb-0"},le=o(()=>e("br",null,null,-1)),oe=o(()=>e("small",null,"امسح هذا الرمز للدفع",-1)),ne=o(()=>e("div",{class:"d-flex align-items-center justify-content-between mb-3"},[e("h5",{class:"card-title mb-0"},"سجل المعاملات")],-1)),re={key:0},ce={class:"mb-3"},de={class:"text-muted"},ie={class:"table-responsive"},_e={key:0},ue={key:1,class:"text-muted"},me={key:2},pe={key:3,class:"text-muted"},fe={key:4},he={key:5,class:"text-muted"},be={key:0,class:"d-flex justify-content-center mt-3"},ge={key:1,class:"text-center py-4"},ye=o(()=>e("p",{class:"text-muted"},"لا توجد معاملات",-1)),ve=[ye],xe={__name:"Dashboard",setup(h){const{store:x,stats:g,transactions:n}=j().props,k=w(()=>route("store.qr-code")),S=w(()=>route("store.qr-code.download")),q=c=>c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",y=c=>parseFloat(c||0).toFixed(2),D=(c,b)=>{B.get(route("store.dashboard"),{page:b},{preserveState:!0})},Q=()=>{const c=window.open("","_blank");c.document.write(`
        <html>
            <head>
                <title>Store QR Code</title>
                <style>
                    body {
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        height: 100vh;
                        margin: 0;
                        font-family: Arial, sans-serif;
                    }
                    .qr-container {
                        text-align: center;
                    }
                    .qr-container h2 {
                        margin-bottom: 20px;
                    }
                    .qr-container img {
                        max-width: 500px;
                        height: auto;
                    }
                </style>
            </head>
            <body>
                <div class="qr-container">
                    <h2>${x.name} - QR Code</h2>
                    <img src="${k.value}" alt="Store QR Code" />
                </div>
            </body>
        </html>
    `),c.document.close(),c.onload=()=>{c.print()}};return(c,b)=>(d(),V(L,null,{default:s(()=>[a(t(R),{title:"Store Dashboard"}),a(A,{title:"لوحة تحكم المتجر",pageTitle:"Dashboard"}),a(t(v),{class:"mb-4"},{default:s(()=>[a(t(_),{md:"4"},{default:s(()=>[a(t(u),{class:"text-center"},{default:s(()=>[a(t(m),null,{default:s(()=>[T,e("h4",Y,[e("span",null,r(y(t(g).total_payments)),1)]),$]),_:1})]),_:1})]),_:1}),a(t(_),{md:"4"},{default:s(()=>[a(t(u),{class:"text-center"},{default:s(()=>[a(t(m),null,{default:s(()=>[z,e("h4",E,[e("span",null,r(t(g).transaction_count),1)]),H]),_:1})]),_:1})]),_:1}),a(t(_),{md:"4"},{default:s(()=>[a(t(u),{class:"text-center"},{default:s(()=>[a(t(m),null,{default:s(()=>[W,e("h4",Z,[e("span",null,r(y(t(g).current_balance)),1)]),J]),_:1})]),_:1})]),_:1})]),_:1}),a(t(v),{class:"mb-4"},{default:s(()=>[a(t(_),{lg:"12"},{default:s(()=>[a(t(u),{"no-body":""},{default:s(()=>[a(t(m),null,{default:s(()=>[e("div",K,[M,e("div",null,[a(t(C),{variant:"primary",class:"me-2",href:S.value,target:"_blank"},{default:s(()=>[O,p(" تحميل ")]),_:1},8,["href"]),a(t(C),{variant:"info",onClick:Q},{default:s(()=>[X,p(" طباعة ")]),_:1})])]),e("div",ee,[e("div",te,[e("img",{src:k.value,alt:"Store QR Code",class:"img-fluid",style:{"max-width":"300px"}},null,8,se)]),e("p",ae,[e("strong",null,r(t(x).name),1),le,oe])])]),_:1})]),_:1})]),_:1})]),_:1}),a(t(v),null,{default:s(()=>[a(t(_),{lg:"12"},{default:s(()=>[a(t(u),{"no-body":""},{default:s(()=>[a(t(m),null,{default:s(()=>[ne,t(n)&&t(n).data&&t(n).data.length>0?(d(),i("div",re,[e("div",ce,[e("span",de,[p("إجمالي المعاملات: "),e("strong",null,r(t(n).total),1)])]),e("div",ie,[a(t(I),{striped:"",hover:"",items:t(n).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"customer_name",label:"الوصف",sortable:!1},{key:"amount",label:"المبلغ",sortable:!0},{key:"reference_id",label:"رقم المرجع",sortable:!1},{key:"created_at",label:"التاريخ",sortable:!0}],class:"table-nowrap"},{"cell(row_number)":s(({index:l})=>[p(r((t(n).current_page-1)*t(n).per_page+l+1),1)]),"cell(customer_name)":s(({item:l})=>[e("div",null,[l.customer_name?(d(),i("span",_e,r(l.customer_name),1)):(d(),i("span",ue,"Unknown")),l.transaction_type_label?(d(),i("br",me)):f("",!0),l.transaction_type_label?(d(),i("small",pe,r(l.transaction_type_label),1)):f("",!0),l.note?(d(),i("br",fe)):f("",!0),l.note?(d(),i("small",he," Note: "+r(l.note),1)):f("",!0)])]),"cell(amount)":s(({item:l})=>[e("span",{class:N(["fw-bold",l.is_credit?"text-success":"text-danger"])},r(l.amount_formatted||(l.is_credit?"+":"-")+y(l.amount))+" Points ",3)]),"cell(reference_id)":s(({item:l})=>[e("code",null,r(l.reference_id),1)]),"cell(created_at)":s(({item:l})=>[p(r(l.date_formatted||q(l.created_at)),1)]),_:1},8,["items"])]),t(n).last_page>1?(d(),i("div",be,[a(t(U),{modelValue:t(n).current_page,"onUpdate:modelValue":b[0]||(b[0]=l=>t(n).current_page=l),"total-rows":t(n).total,"per-page":t(n).per_page,onPageClick:D},null,8,["modelValue","total-rows","per-page"])])):f("",!0)])):(d(),i("div",ge,ve))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Ve=G(xe,[["__scopeId","data-v-cdaa65d1"]]);export{Ve as default};
