import{x as N,Q as L,T as P,c as k,w as o,o as p,a as n,u as e,Z as j,G as m,m as z,k as E,f as s,l as h,t as l,i as y,D as g,E as w,p as x,h as u,q as G,d as f,s as v,n as I,e as V,j as Y,Y as q}from"./app-Baws5krQ.js";import{L as A}from"./main-DSaa3E_d.js";import{P as H}from"./page-header-WpxB93eJ.js";import{_ as M}from"./card-header-DdZcqS1K.js";import"./simplebar-vue.esm-DAj5T6fG.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-Bc94pPwb.js";import"./us-DIspYScJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"mb-4"},R={class:"mb-3"},Z={class:"form-label"},$=["placeholder"],J={class:"mb-3"},K={class:"form-label"},O={value:""},W={value:"success"},X={value:"pending"},ee={value:"failed"},te={class:"mb-3"},se={class:"form-label"},ae={value:""},oe={value:"purchase"},le={value:"transfer"},ne={value:"credit"},re={class:"mb-3"},de={class:"form-label"},ie={class:"mb-3"},ue={class:"form-label"},ce={class:"mb-3"},_e=s("i",{class:"ri-search-line me-1"},null,-1),pe=s("i",{class:"ri-refresh-line me-1"},null,-1),me={class:"mb-3"},fe={class:"text-muted"},be={class:"table-responsive"},he={key:0},ye=s("br",null,null,-1),ge={class:"text-muted"},ve={key:0},ke=s("br",null,null,-1),we={class:"text-muted"},xe={key:1,class:"text-muted"},Ve={key:0,class:"ri-arrow-down-line text-success"},Se={key:1,class:"ri-arrow-up-line text-danger"},Ue={key:0,class:"d-flex justify-content-center mt-3"},Ee={__name:"Index",setup(Be){const{t:a}=N(),{transactions:_,filters:i}=L().props,r=P({page:1,keyword:(i==null?void 0:i.keyword)||"",status:(i==null?void 0:i.status)||"",type:(i==null?void 0:i.type)||"",date_from:(i==null?void 0:i.date_from)||"",date_to:(i==null?void 0:i.date_to)||""}),S=(c,d)=>{r.page=d||r.page,r.get(route("admin.transactions.index"),{},{preserveState:!0})},U=()=>{r.page=1,r.get(route("admin.transactions.index"),{},{preserveState:!0})},B=()=>{r.keyword="",r.status="",r.type="",r.date_from="",r.date_to="",r.page=1,r.get(route("admin.transactions.index"),{},{preserveState:!0})},C=c=>new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=c=>parseFloat(c||0).toFixed(2),T=c=>({success:"outline-success",pending:"outline-warning",failed:"outline-danger"})[c]||"secondary",F=c=>({purchase:"outline-primary",transfer:"outline-info",credit:"outline-success",refund:"outline-warning"})[c]||"outline-secondary";return(c,d)=>(p(),k(A,null,{default:o(()=>[n(e(j),{title:e(a)("t-transactions")},null,8,["title"]),n(H,{title:e(a)("t-transactions"),pageTitle:e(a)("t-transactions-management")},null,8,["title","pageTitle"]),n(e(h),null,{default:o(()=>[n(e(m),{lg:"12"},{default:o(()=>[n(e(z),{"no-body":""},{default:o(()=>[n(M,{title:e(a)("t-transactions-list")},null,8,["title"]),n(e(E),null,{default:o(()=>[s("div",Q,[n(e(h),null,{default:o(()=>[n(e(m),{md:"3"},{default:o(()=>[s("div",R,[s("label",Z,l(e(a)("t-search")),1),y(s("input",{"onUpdate:modelValue":d[0]||(d[0]=t=>e(r).keyword=t),type:"text",class:"form-control",placeholder:e(a)("t-reference-id-name-phone")},null,8,$),[[g,e(r).keyword]])])]),_:1}),n(e(m),{md:"2"},{default:o(()=>[s("div",J,[s("label",K,l(e(a)("t-status")),1),n(e(w),{modelValue:e(r).status,"onUpdate:modelValue":d[1]||(d[1]=t=>e(r).status=t)},{default:o(()=>[s("option",O,l(e(a)("t-all")),1),s("option",W,l(e(a)("t-success")),1),s("option",X,l(e(a)("t-pending")),1),s("option",ee,l(e(a)("t-failed")),1)]),_:1},8,["modelValue"])])]),_:1}),n(e(m),{md:"2"},{default:o(()=>[s("div",te,[s("label",se,l(e(a)("t-type")),1),n(e(w),{modelValue:e(r).type,"onUpdate:modelValue":d[2]||(d[2]=t=>e(r).type=t)},{default:o(()=>[s("option",ae,l(e(a)("t-all")),1),s("option",oe,l(e(a)("t-purchase")),1),s("option",le,l(e(a)("t-transfer")),1),s("option",ne,l(e(a)("t-credit")),1)]),_:1},8,["modelValue"])])]),_:1}),n(e(m),{md:"2"},{default:o(()=>[s("div",re,[s("label",de,l(e(a)("t-date-from")),1),y(s("input",{"onUpdate:modelValue":d[3]||(d[3]=t=>e(r).date_from=t),type:"date",class:"form-control"},null,512),[[g,e(r).date_from]])])]),_:1}),n(e(m),{md:"2"},{default:o(()=>[s("div",ie,[s("label",ue,l(e(a)("t-date-to")),1),y(s("input",{"onUpdate:modelValue":d[4]||(d[4]=t=>e(r).date_to=t),type:"date",class:"form-control"},null,512),[[g,e(r).date_to]])])]),_:1})]),_:1}),n(e(h),null,{default:o(()=>[n(e(m),{md:"12"},{default:o(()=>[s("div",ce,[n(e(x),{variant:"primary",onClick:U,class:"me-2"},{default:o(()=>[_e,u(" "+l(e(a)("t-apply-filters")),1)]),_:1}),n(e(x),{variant:"outline-primary",onClick:B},{default:o(()=>[pe,u(" "+l(e(a)("t-reset")),1)]),_:1})])]),_:1})]),_:1})]),s("div",me,[s("span",fe,[u(l(e(a)("t-total-transactions"))+": ",1),s("strong",null,l(e(_).total),1)])]),s("div",be,[n(e(G),{striped:"",hover:"",items:e(_).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"reference_id",label:e(a)("t-reference-id"),sortable:!0},{key:"from_user",label:e(a)("t-from"),sortable:!1},{key:"to_user",label:e(a)("t-to"),sortable:!1},{key:"amount",label:e(a)("t-amount"),sortable:!0},{key:"type",label:e(a)("t-type"),sortable:!0},{key:"status",label:e(a)("t-status"),sortable:!0},{key:"created_at",label:e(a)("t-created-at"),sortable:!0},{key:"actions",label:e(a)("t-actions")}],class:"table-nowrap"},{"cell(row_number)":o(({index:t})=>[u(l((e(_).current_page-1)*e(_).per_page+t+1),1)]),"cell(reference_id)":o(({item:t})=>[s("code",null,l(t.reference_id),1)]),"cell(from_user)":o(({item:t})=>{var b;return[(b=t.from_wallet)!=null&&b.user?(p(),f("span",he,[u(l(t.from_wallet.user.name),1),ye,s("small",ge,l(t.from_wallet.user.phone),1)])):(p(),k(e(v),{key:1,variant:"outline-secondary"},{default:o(()=>[u(l(e(a)("t-system")),1)]),_:1}))]}),"cell(to_user)":o(({item:t})=>{var b;return[(b=t.to_wallet)!=null&&b.user?(p(),f("span",ve,[u(l(t.to_wallet.user.name),1),ke,s("small",we,l(t.to_wallet.user.phone),1)])):(p(),f("span",xe,"-"))]}),"cell(amount)":o(({item:t})=>[s("span",{class:I(["fw-bold",{"text-success":t.is_credit||t.has_credit&&!t.has_debit,"text-danger":t.is_debit||t.has_debit&&!t.has_credit}])},[t.is_credit||t.has_credit&&!t.has_debit?(p(),f("i",Ve)):t.is_debit||t.has_debit&&!t.has_credit?(p(),f("i",Se)):V("",!0),u(" "+l(t.display_amount||D(t.amount))+" "+l(e(a)("t-points")),1)],2)]),"cell(type)":o(({item:t})=>[n(e(v),{variant:F(t.type)},{default:o(()=>[u(l(t.type),1)]),_:2},1032,["variant"])]),"cell(status)":o(({item:t})=>[n(e(v),{variant:T(t.status)},{default:o(()=>[u(l(t.status),1)]),_:2},1032,["variant"])]),"cell(created_at)":o(({item:t})=>[u(l(C(t.created_at)),1)]),"cell(actions)":o(({item:t})=>[n(e(Y),{href:c.route("admin.transactions.show",t.id),class:"btn btn-outline-primary btn-sm"},{default:o(()=>[u(l(e(a)("t-view")),1)]),_:2},1032,["href"])]),_:1},8,["items","fields"])]),e(_).last_page>1?(p(),f("div",Ue,[n(e(q),{modelValue:e(_).current_page,"onUpdate:modelValue":d[5]||(d[5]=t=>e(_).current_page=t),"total-rows":e(_).total,"per-page":e(_).per_page,onPageClick:S},null,8,["modelValue","total-rows","per-page"])])):V("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Ee as default};
