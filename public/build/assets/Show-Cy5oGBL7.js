import{x as W,Q as E,c as v,w as e,o as u,a as l,u as t,j as k,h as c,t as o,G as _,m as x,k as S,l as b,f as s,e as g,s as y,d as f,n as T,A as U,q as Y,Y as $,z as V}from"./app-DAJLD3VL.js";import{L as j}from"./main-C4AzBLHy.js";import{P as z}from"./page-header-BZ_NBl-q.js";import{_ as B}from"./card-header-AogAJ3Zq.js";import{S as N}from"./sweetalert2.all-5hR1i7Q2.js";import"./simplebar-vue.esm-Bl3jGYa5.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-Bc94pPwb.js";import"./us-DIspYScJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"mb-3"},H={class:"form-label fw-semibold"},M={class:"form-control-plaintext"},q={class:"mb-3"},I={class:"form-label fw-semibold"},Q={class:"form-control-plaintext"},R={class:"mb-3"},J={class:"form-label fw-semibold"},K={class:"form-control-plaintext"},O={class:"mb-3"},X={class:"form-label fw-semibold"},Z={class:"form-control-plaintext"},tt={class:"badge bg-success"},et={class:"mb-3"},st={class:"form-label fw-semibold"},at={class:"form-control-plaintext"},lt={class:"mb-3"},ot={class:"form-label fw-semibold"},rt={class:"form-control-plaintext"},nt={class:"mb-3"},it={class:"form-label fw-semibold"},ct={class:"form-control-plaintext"},dt={class:"mb-3"},ut={class:"form-label fw-semibold"},_t={class:"form-control-plaintext"},mt={class:"h4 text-primary fw-bold"},ft={class:"mb-3"},pt={class:"form-label fw-semibold"},bt={class:"d-flex align-items-center gap-2"},ht=["value"],wt={key:0},gt={class:"mb-3"},yt={class:"text-muted"},vt={class:"table-responsive"},kt={key:0},xt=s("br",null,null,-1),St={class:"text-muted"},Tt={key:0},Vt=s("br",null,null,-1),Bt={class:"text-muted"},Dt={key:1,class:"text-muted"},Nt={key:0,class:"ri-arrow-down-line text-success"},Ct={key:1,class:"ri-arrow-up-line text-danger"},Lt={key:0,class:"d-flex justify-content-center mt-3"},At={key:1,class:"text-center py-4"},Ft=s("p",{class:"text-muted"},"No transactions found",-1),Pt=[Ft],It={__name:"Show",setup(Wt){const{t:r}=W(),{user:n,transactions:d}=E().props,w=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",D=i=>parseFloat(i||0).toFixed(2),C=i=>({success:"success",pending:"warning",failed:"danger"})[i]||"secondary",L=i=>({purchase:"primary",transfer:"info",credit:"success",debit:"danger",refund:"warning"})[i]||"secondary",A=(i,p)=>{V.get(route("admin.users.show",n.id),{page:p},{preserveState:!0})},F=i=>{const p=i.target,m=new FormData(p).get("status");V.post(route("admin.users.updateWalletStatus",n.id),{status:m},{preserveState:!1,preserveScroll:!0,onSuccess:h=>{const P=r(m==="locked"?"t-locked":"t-active");N.fire({icon:"success",title:r("t-success"),text:`${r("t-wallet-status-updated")} ${P}`,timer:2e3,showConfirmButton:!1}),V.reload()},onError:h=>{N.fire({icon:"error",title:r("t-error"),text:h.message||r("t-an-error-occurred")})}})};return(i,p)=>(u(),v(j,null,{default:e(()=>[l(z,{title:t(r)("t-user-details"),pageTitle:t(r)("t-all-users"),href:i.route("admin.users.index")},{actions:e(()=>[l(t(k),{href:i.route("admin.users.edit",t(n).id),class:"btn btn-primary me-2"},{default:e(()=>[c(o(t(r)("t-edit-user")),1)]),_:1},8,["href"]),l(t(k),{href:i.route("admin.users.index"),class:"btn btn-outline-primary"},{default:e(()=>[c(o(t(r)("t-back-to-list")),1)]),_:1},8,["href"])]),_:1},8,["title","pageTitle","href"]),l(t(b),null,{default:e(()=>[l(t(_),{lg:"12"},{default:e(()=>[l(t(x),{"no-body":""},{default:e(()=>[l(B,{title:t(r)("t-user-information")},null,8,["title"]),l(t(S),null,{default:e(()=>[l(t(b),null,{default:e(()=>[l(t(_),{md:"6"},{default:e(()=>[s("div",G,[s("label",H,o(t(r)("t-full-name")),1),s("p",M,o(t(n).name),1)])]),_:1}),l(t(_),{md:"6"},{default:e(()=>[s("div",q,[s("label",I,o(t(r)("t-username")),1),s("p",Q,o(t(n).user_name),1)])]),_:1})]),_:1}),l(t(b),null,{default:e(()=>[l(t(_),{md:"6"},{default:e(()=>[s("div",R,[s("label",J,o(t(r)("t-email-address")),1),s("p",K,o(t(n).email),1)])]),_:1}),l(t(_),{md:"6"},{default:e(()=>[s("div",O,[s("label",X,o(t(r)("t-user-type")),1),s("p",Z,[s("span",tt,o(t(n).type),1)])])]),_:1})]),_:1}),l(t(b),null,{default:e(()=>[l(t(_),{md:"6"},{default:e(()=>[s("div",et,[s("label",st,o(t(r)("t-created-at")),1),s("p",at,o(w(t(n).created_at)),1)])]),_:1}),l(t(_),{md:"6"},{default:e(()=>[s("div",lt,[s("label",ot,o(t(r)("t-last-updated")),1),s("p",rt,o(w(t(n).updated_at)),1)])]),_:1})]),_:1}),t(n).email_verified_at?(u(),v(t(b),{key:0},{default:e(()=>[l(t(_),{md:"6"},{default:e(()=>[s("div",nt,[s("label",it,o(t(r)("t-email-verified-at")),1),s("p",ct,o(w(t(n).email_verified_at)),1)])]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),l(t(b),{class:"mt-4"},{default:e(()=>[l(t(_),{lg:"12"},{default:e(()=>[l(t(x),{"no-body":""},{default:e(()=>[l(B,{title:t(r)("t-wallet-information")},null,8,["title"]),l(t(S),null,{default:e(()=>[l(t(b),null,{default:e(()=>[l(t(_),{md:"6"},{default:e(()=>{var a;return[s("div",dt,[s("label",ut,o(t(r)("t-current-balance")),1),s("p",_t,[s("span",mt,o(D(((a=t(n).wallet)==null?void 0:a.balance)||0))+" "+o(t(r)("t-points")),1)])])]}),_:1}),l(t(_),{md:"6"},{default:e(()=>{var a;return[s("div",ft,[s("label",pt,o(t(r)("t-wallet-status")),1),s("div",bt,[l(t(y),{variant:((a=t(n).wallet)==null?void 0:a.status)==="active"?"success":"danger"},{default:e(()=>{var m,h;return[c(o(((m=t(n).wallet)==null?void 0:m.status)==="active"?"Active":((h=t(n).wallet)==null?void 0:h.status)==="locked"?"Locked":"N/A"),1)]}),_:1},8,["variant"]),t(n).wallet?(u(),f("form",{key:0,onSubmit:U(F,["prevent"]),class:"d-inline"},[s("input",{type:"hidden",name:"status",value:t(n).wallet.status==="active"?"locked":"active"},null,8,ht),s("button",{type:"submit",class:T(["btn btn-sm",t(n).wallet.status==="active"?"btn-warning":"btn-success"])},[s("i",{class:T(t(n).wallet.status==="active"?"ri-lock-line":"ri-lock-unlock-line")},null,2),c(" "+o(t(n).wallet.status==="active"?"Lock Wallet":"Unlock Wallet"),1)],2)],32)):g("",!0)])])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(t(b),{class:"mt-4"},{default:e(()=>[l(t(_),{lg:"12"},{default:e(()=>[l(t(x),{"no-body":""},{default:e(()=>[l(B,{title:"Transactions History"}),l(t(S),null,{default:e(()=>[t(d)&&t(d).data&&t(d).data.length>0?(u(),f("div",wt,[s("div",gt,[s("span",yt,[c("Total Transactions: "),s("strong",null,o(t(d).total),1)])]),s("div",vt,[l(t(Y),{striped:"",hover:"",items:t(d).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"reference_id",label:t(r)("t-reference-id"),sortable:!0},{key:"from_user",label:t(r)("t-from"),sortable:!1},{key:"to_user",label:t(r)("t-to"),sortable:!1},{key:"amount",label:t(r)("t-amount"),sortable:!0},{key:"type",label:t(r)("t-type"),sortable:!0},{key:"status",label:t(r)("t-status"),sortable:!0},{key:"created_at",label:t(r)("t-date"),sortable:!0},{key:"actions",label:t(r)("t-actions")}],class:"table-nowrap"},{"cell(row_number)":e(({index:a})=>[c(o((t(d).current_page-1)*t(d).per_page+a+1),1)]),"cell(reference_id)":e(({item:a})=>[s("code",null,o(a.reference_id),1)]),"cell(from_user)":e(({item:a})=>{var m;return[(m=a.from_wallet)!=null&&m.user?(u(),f("span",kt,[c(o(a.from_wallet.user.name),1),xt,s("small",St,o(a.from_wallet.user.phone),1)])):(u(),v(t(y),{key:1,variant:"secondary"},{default:e(()=>[c("SYSTEM")]),_:1}))]}),"cell(to_user)":e(({item:a})=>{var m;return[(m=a.to_wallet)!=null&&m.user?(u(),f("span",Tt,[c(o(a.to_wallet.user.name),1),Vt,s("small",Bt,o(a.to_wallet.user.phone),1)])):(u(),f("span",Dt,"-"))]}),"cell(amount)":e(({item:a})=>[s("span",{class:T(["fw-bold",{"text-success":a.is_credit,"text-danger":a.is_debit}])},[a.is_credit?(u(),f("i",Nt)):a.is_debit?(u(),f("i",Ct)):g("",!0),c(" "+o(a.display_amount||D(a.amount))+" Points ",1)],2)]),"cell(type)":e(({item:a})=>[l(t(y),{variant:L(a.type)},{default:e(()=>[c(o(a.type),1)]),_:2},1032,["variant"])]),"cell(status)":e(({item:a})=>[l(t(y),{variant:C(a.status)},{default:e(()=>[c(o(a.status),1)]),_:2},1032,["variant"])]),"cell(created_at)":e(({item:a})=>[c(o(w(a.created_at)),1)]),"cell(actions)":e(({item:a})=>[l(t(k),{href:i.route("admin.transactions.show",a.id),class:"btn btn-info btn-sm"},{default:e(()=>[c(" View ")]),_:2},1032,["href"])]),_:1},8,["items","fields"])]),t(d).last_page>1?(u(),f("div",Lt,[l(t($),{modelValue:t(d).current_page,"onUpdate:modelValue":p[0]||(p[0]=a=>t(d).current_page=a),"total-rows":t(d).total,"per-page":t(d).per_page,onPageClick:A},null,8,["modelValue","total-rows","per-page"])])):g("",!0)])):(u(),f("div",At,Pt))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{It as default};
