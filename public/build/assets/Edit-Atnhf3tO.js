import{i as S,Q as B,b as D,T as N,c as z,w as n,o as v,a as s,u as e,G as T,m as E,f as l,n as i,d as x,g as L,y as b,e as F,F as G,h,t as u,B as k,C as V,A as P,k as A}from"./app-BpXjbCMW.js";import{L as H}from"./main-B236rcsx.js";import{P as I}from"./page-header-DEyyf2_K.js";import{_ as M}from"./card-header-Ct8audyA.js";import{_ as Q}from"./FormSection-ARRP3li-.js";import{_}from"./InputError-jV2YQ5AJ.js";import{_ as f}from"./InputLabel-Bt9-yyqx.js";import{_ as g}from"./TextInput-CyoGix6i.js";import{S as w}from"./sweetalert2.all-BXeenfYg.js";import"./simplebar-vue.esm-Ds3EkmLx.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-Bc94pPwb.js";import"./us-DIspYScJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"mb-3"},j={class:"mb-3"},q={class:"mb-3"},J={class:"mb-3"},K=l("i",{class:"ri-delete-bin-line"},null,-1),O=l("i",{class:"ri-add-line me-1"},null,-1),W={class:"text-muted d-block mt-1"},X={class:"mb-3"},Y={class:"d-flex gap-4 mt-2"},Z={class:"form-check"},ee={class:"form-check-label",for:"status_active"},te={class:"form-check"},se={class:"form-check-label",for:"status_completed"},ae={class:"form-check"},le={class:"form-check-label",for:"status_cancelled"},ke={__name:"Edit",setup(oe){const{t:a}=S(),{prize:m}=B().props,d=D(m.dates?[...m.dates]:[""]),t=N({name:m.name,status:m.status,total_winners:m.total_winners,total_amount:m.total_amount,dates:[]}),U=()=>{d.value.push("")},C=c=>{d.value.splice(c,1)},$=()=>{if(t.dates=d.value.filter(c=>c.trim()!==""),t.dates.length===0){w.fire({icon:"error",title:a("t-error-message"),text:a("t-must-add-at-least-one-date")});return}t.put(route("admin.prizes.update",m.id),{preserveScroll:!0,onSuccess:()=>{w.fire({icon:"success",title:a("t-success-message"),text:a("t-prize-updated")})},onError:()=>{w.fire({icon:"error",title:a("t-error-message"),text:a("t-error-updating")})}})};return(c,o)=>(v(),z(H,null,{default:n(()=>[s(I,{title:e(a)("t-edit-prize"),pageTitle:e(a)("t-prizes-management"),href:c.route("admin.prizes.index")},null,8,["title","pageTitle","href"]),s(e(A),null,{default:n(()=>[s(e(T),{lg:"12"},{default:n(()=>[s(e(E),{"no-body":""},{default:n(()=>[s(M,{title:e(a)("t-edit-prize")},null,8,["title"]),s(Q,{onSubmitted:$},{form:n(()=>[l("div",R,[s(f,{for:"name",value:e(a)("t-prize-name")},null,8,["value"]),s(g,{id:"name",modelValue:e(t).name,"onUpdate:modelValue":o[0]||(o[0]=r=>e(t).name=r),type:"text",class:i(["mt-1 block w-full",{"is-invalid":e(t).errors.name}])},null,8,["modelValue","class"]),s(_,{message:e(t).errors.name,class:"mt-2"},null,8,["message"])]),l("div",j,[s(f,{for:"total_winners",value:e(a)("t-total-winners-count")},null,8,["value"]),s(g,{id:"total_winners",modelValue:e(t).total_winners,"onUpdate:modelValue":o[1]||(o[1]=r=>e(t).total_winners=r),type:"number",min:"1",class:i(["mt-1 block w-full",{"is-invalid":e(t).errors.total_winners}])},null,8,["modelValue","class"]),s(_,{message:e(t).errors.total_winners,class:"mt-2"},null,8,["message"])]),l("div",q,[s(f,{for:"total_amount",value:e(a)("t-prize-amount-points")},null,8,["value"]),s(g,{id:"total_amount",modelValue:e(t).total_amount,"onUpdate:modelValue":o[2]||(o[2]=r=>e(t).total_amount=r),type:"number",step:"0.01",min:"0",class:i(["mt-1 block w-full",{"is-invalid":e(t).errors.total_amount}])},null,8,["modelValue","class"]),s(_,{message:e(t).errors.total_amount,class:"mt-2"},null,8,["message"])]),l("div",J,[s(f,{value:e(a)("t-available-dates")},null,8,["value"]),(v(!0),x(G,null,L(d.value,(r,p)=>(v(),x("div",{key:p,class:"mb-2 d-flex gap-2"},[s(g,{modelValue:d.value[p],"onUpdate:modelValue":y=>d.value[p]=y,type:"date",class:i(["flex-grow-1",{"is-invalid":e(t).errors[`dates.${p}`]}])},null,8,["modelValue","onUpdate:modelValue","class"]),d.value.length>1?(v(),z(e(b),{key:0,variant:"danger",onClick:y=>C(p)},{default:n(()=>[K]),_:2},1032,["onClick"])):F("",!0)]))),128)),s(e(b),{variant:"outline-primary",onClick:U,class:"mt-2"},{default:n(()=>[O,h(" "+u(e(a)("t-add-date")),1)]),_:1}),s(_,{message:e(t).errors.dates,class:"mt-2"},null,8,["message"]),l("small",W,u(e(a)("t-note"))+": "+u(e(a)("t-deleting-date-will-delete-ticket")),1)]),l("div",X,[s(f,{value:e(a)("t-prize-status")},null,8,["value"]),l("div",Y,[l("div",Z,[k(l("input",{class:i(["form-check-input",{"is-invalid":e(t).errors.status}]),type:"radio",name:"status",id:"status_active",value:"active","onUpdate:modelValue":o[3]||(o[3]=r=>e(t).status=r)},null,2),[[V,e(t).status]]),l("label",ee,u(e(a)("t-active")),1)]),l("div",te,[k(l("input",{class:i(["form-check-input",{"is-invalid":e(t).errors.status}]),type:"radio",name:"status",id:"status_completed",value:"completed","onUpdate:modelValue":o[4]||(o[4]=r=>e(t).status=r)},null,2),[[V,e(t).status]]),l("label",se,u(e(a)("t-completed")),1)]),l("div",ae,[k(l("input",{class:i(["form-check-input",{"is-invalid":e(t).errors.status}]),type:"radio",name:"status",id:"status_cancelled",value:"cancelled","onUpdate:modelValue":o[5]||(o[5]=r=>e(t).status=r)},null,2),[[V,e(t).status]]),l("label",le,u(e(a)("t-cancelled")),1)])]),s(_,{message:e(t).errors.status,class:"mt-2"},null,8,["message"])])]),actions:n(()=>[s(e(b),{variant:"primary",type:"submit",class:i({"opacity-25":e(t).processing}),disabled:e(t).processing},{default:n(()=>[h(u(e(a)("t-save")),1)]),_:1},8,["class","disabled"]),s(e(P),{href:c.route("admin.prizes.index"),class:"btn btn-secondary ms-2"},{default:n(()=>[h(u(e(a)("t-cancel")),1)]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ke as default};
