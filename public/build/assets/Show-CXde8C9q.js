import{i as V,Q as C,c as m,w as a,o as d,a as s,u as t,Z as L,G as c,m as g,v as y,k as f,f as i,t as n,h as r,p as x,l as z,A as T,d as A,e as B,K as E}from"./app-BpXjbCMW.js";import{L as F}from"./main-B236rcsx.js";import{P as G}from"./page-header-DEyyf2_K.js";import{_ as b}from"./card-header-Ct8audyA.js";import"./simplebar-vue.esm-Ds3EkmLx.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-Bc94pPwb.js";import"./us-DIspYScJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"text-success"},W={class:"text-danger"},H={class:"text-success"},I={key:1},K={class:"text-danger"},Q={class:"mt-3"},Y={__name:"Show",setup(U){const{t:e}=V(),{distribution:u,winners:p}=C().props,D=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",N=l=>parseFloat(l||0).toFixed(2),h=l=>({attendance_fan:e("t-attendance-fan"),online_fan:e("t-online-fan"),ugc_creator:e("t-ugc-creator")})[l]||l,S=()=>{var l,_;return((l=u.event_meta)==null?void 0:l.title)||((_=u.event_meta)==null?void 0:_.title_ar)||"-"},k=p.filter(l=>l.status==="success"),v=p.filter(l=>l.status==="failed");return(l,_)=>(d(),m(F,null,{default:a(()=>[s(t(L),{title:t(e)("t-prize-distribution-details")},null,8,["title"]),s(G,{title:t(e)("t-prize-distribution-details"),pageTitle:t(e)("t-prize-distributions")},null,8,["title","pageTitle"]),s(t(f),null,{default:a(()=>[s(t(c),{lg:"12"},{default:a(()=>[s(t(g),{"no-body":"",class:"mb-4"},{default:a(()=>[s(b,{title:t(e)("t-event-information")},null,8,["title"]),s(t(y),null,{default:a(()=>[s(t(f),null,{default:a(()=>[s(t(c),{md:"3"},{default:a(()=>[i("strong",null,n(t(e)("t-event-id"))+":",1),r(" "+n(t(u).event_id),1)]),_:1}),s(t(c),{md:"3"},{default:a(()=>[i("strong",null,n(t(e)("t-type"))+":",1),s(t(x),{variant:t(u).event_type==="ugc"?"info":"primary",class:"ms-2"},{default:a(()=>[r(n(t(u).event_type==="ugc"?t(e)("t-ugc"):t(e)("t-nomination")),1)]),_:1},8,["variant"])]),_:1}),s(t(c),{md:"3"},{default:a(()=>[i("strong",null,n(t(e)("t-status"))+":",1),s(t(x),{variant:t(u).status==="completed"?"success":t(u).status==="failed"?"danger":"warning",class:"ms-2"},{default:a(()=>[r(n(t(u).status==="completed"?t(e)("t-completed"):t(u).status==="failed"?t(e)("t-failed"):t(e)("t-processing")),1)]),_:1},8,["variant"])]),_:1}),s(t(c),{md:"3"},{default:a(()=>[i("strong",null,n(t(e)("t-date"))+":",1),r(" "+n(D(t(u).created_at)),1)]),_:1})]),_:1}),s(t(f),{class:"mt-3"},{default:a(()=>[s(t(c),{md:"12"},{default:a(()=>[i("strong",null,n(t(e)("t-title"))+":",1),r(" "+n(S()),1)]),_:1})]),_:1}),s(t(f),{class:"mt-3"},{default:a(()=>[s(t(c),{md:"4"},{default:a(()=>[i("strong",null,n(t(e)("t-total-winners"))+":",1),r(" "+n(t(p).length),1)]),_:1}),s(t(c),{md:"4"},{default:a(()=>[i("strong",null,n(t(e)("t-success"))+":",1),r(),i("span",P,n(t(u).processed_count),1)]),_:1}),s(t(c),{md:"4"},{default:a(()=>[i("strong",null,n(t(e)("t-failed"))+":",1),r(),i("span",W,n(t(u).failed_count),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(k).length>0?(d(),m(t(g),{key:0,"no-body":"",class:"mb-4"},{default:a(()=>[s(b,{title:t(e)("t-successful-winners")},null,8,["title"]),s(t(y),null,{default:a(()=>[s(t(z),{items:t(k),fields:[{key:"position",label:t(e)("t-position"),sortable:!0},{key:"category",label:t(e)("t-category")},{key:"user_name",label:t(e)("t-user-name")},{key:"email",label:t(e)("t-email")},{key:"phone",label:t(e)("t-phone")},{key:"points_scored",label:t(e)("t-points-scored")},{key:"prize_amount",label:t(e)("t-prize-amount")},{key:"transaction_id",label:t(e)("t-transaction-id")}],striped:"",hover:"",responsive:""},{"cell(category)":a(({item:o})=>[r(n(h(o.category)),1)]),"cell(user_name)":a(({item:o})=>{var w;return[r(n(((w=o.user)==null?void 0:w.name)||"-"),1)]}),"cell(prize_amount)":a(({item:o})=>[i("strong",H,n(N(o.prize_amount))+" "+n(t(e)("t-points")),1)]),"cell(transaction_id)":a(({item:o})=>[o.transaction_id?(d(),m(t(T),{key:0,href:l.route("admin.transactions.show",o.transaction_id),class:"btn btn-sm btn-link"},{default:a(()=>[r(" #"+n(o.transaction_id),1)]),_:2},1032,["href"])):(d(),A("span",I,"-"))]),_:1},8,["items","fields"])]),_:1})]),_:1})):B("",!0),t(v).length>0?(d(),m(t(g),{key:1,"no-body":""},{default:a(()=>[s(b,{title:t(e)("t-failed-winners")},null,8,["title"]),s(t(y),null,{default:a(()=>[s(t(E),{variant:"warning",show:""},{default:a(()=>[i("strong",null,n(t(e)("t-note"))+":",1),r(" "+n(t(e)("t-failed-winners-note")),1)]),_:1}),s(t(z),{items:t(v),fields:[{key:"position",label:t(e)("t-position")},{key:"category",label:t(e)("t-category")},{key:"midan_user_id",label:t(e)("t-midan-user-id")},{key:"email",label:t(e)("t-email")},{key:"phone",label:t(e)("t-phone")},{key:"error_message",label:t(e)("t-failure-reason")}],striped:"",hover:"",responsive:""},{"cell(category)":a(({item:o})=>[r(n(h(o.category)),1)]),"cell(error_message)":a(({item:o})=>[i("span",K,n(o.error_message||t(e)("t-unknown")),1)]),_:1},8,["items","fields"])]),_:1})]),_:1})):B("",!0),i("div",Q,[s(t(T),{href:l.route("admin.prize-distributions.index"),class:"btn btn-secondary"},{default:a(()=>[r(n(t(e)("t-back-to-list")),1)]),_:1},8,["href"])])]),_:1})]),_:1})]),_:1}))}};export{Y as default};
