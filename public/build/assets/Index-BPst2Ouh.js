import{i as N,Q as z,T as L,c as x,w as l,o as u,a as n,u as e,Z as P,G as f,m as A,v as G,f as o,k as g,t as a,B as v,O as k,z as V,y as B,h as c,l as I,d as p,p as w,n as Y,e as b,A as j,Y as E}from"./app-BpXjbCMW.js";import{L as H}from"./main-B236rcsx.js";import{P as M}from"./page-header-DEyyf2_K.js";import{_ as O}from"./card-header-Ct8audyA.js";import"./simplebar-vue.esm-Ds3EkmLx.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-Bc94pPwb.js";import"./us-DIspYScJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"mb-4"},R={class:"mb-3"},Z={class:"form-label"},$=["placeholder"],q={class:"mb-3"},J={class:"form-label"},K={value:""},W={value:"success"},X={value:"pending"},ee={value:"failed"},te={class:"mb-3"},se={class:"form-label"},ae={value:""},oe={value:"purchase"},le={value:"transfer"},ne={value:"credit"},re={class:"mb-3"},de={class:"form-label"},ie={class:"mb-3"},ce={class:"form-label"},ue={class:"mb-3"},_e=o("i",{class:"ri-search-line me-1"},null,-1),pe=o("i",{class:"ri-refresh-line me-1"},null,-1),me={class:"mb-3"},fe={class:"text-muted"},he={class:"table-responsive"},be={key:0},ye=o("br",null,null,-1),ge={class:"text-muted"},ve={key:0},ke=o("br",null,null,-1),we={class:"text-muted"},xe={key:1,class:"text-muted"},Ve={key:0,class:"ri-arrow-down-line text-success"},Be={key:1,class:"ri-arrow-up-line text-danger"},Se={key:0,class:"small text-muted"},Ue={key:0,class:"text-danger fw-bold"},Ce={key:0,class:"text-muted small"},Te={key:1,class:"text-muted"},De={key:0,class:"d-flex justify-content-center mt-3"},Ee={__name:"Index",setup(Fe){const{t:s}=N(),{transactions:m,filters:i}=z().props,r=L({page:1,keyword:(i==null?void 0:i.keyword)||"",status:(i==null?void 0:i.status)||"",type:(i==null?void 0:i.type)||"",date_from:(i==null?void 0:i.date_from)||"",date_to:(i==null?void 0:i.date_to)||""}),S=(_,d)=>{r.page=d||r.page,r.get(route("admin.transactions.index"),{},{preserveState:!0})},U=()=>{r.page=1,r.get(route("admin.transactions.index"),{},{preserveState:!0})},C=()=>{r.keyword="",r.status="",r.type="",r.date_from="",r.date_to="",r.page=1,r.get(route("admin.transactions.index"),{},{preserveState:!0})},T=_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),y=_=>parseFloat(_||0).toFixed(2),D=_=>({success:"success",pending:"warning",failed:"danger"})[_]||"secondary",F=_=>({purchase:"primary",transfer:"info",credit:"success",refund:"warning"})[_]||"secondary";return(_,d)=>(u(),x(H,null,{default:l(()=>[n(e(P),{title:e(s)("t-transactions")},null,8,["title"]),n(M,{title:e(s)("t-transactions"),pageTitle:e(s)("t-transactions-management")},null,8,["title","pageTitle"]),n(e(g),null,{default:l(()=>[n(e(f),{lg:"12"},{default:l(()=>[n(e(A),{"no-body":""},{default:l(()=>[n(O,{title:e(s)("t-transactions-list")},null,8,["title"]),n(e(G),null,{default:l(()=>[o("div",Q,[n(e(g),null,{default:l(()=>[n(e(f),{md:"3"},{default:l(()=>[o("div",R,[o("label",Z,a(e(s)("t-search")),1),v(o("input",{"onUpdate:modelValue":d[0]||(d[0]=t=>e(r).keyword=t),type:"text",class:"form-control",placeholder:e(s)("t-reference-id-name-phone")},null,8,$),[[k,e(r).keyword]])])]),_:1}),n(e(f),{md:"2"},{default:l(()=>[o("div",q,[o("label",J,a(e(s)("t-status")),1),n(e(V),{modelValue:e(r).status,"onUpdate:modelValue":d[1]||(d[1]=t=>e(r).status=t)},{default:l(()=>[o("option",K,a(e(s)("t-all")),1),o("option",W,a(e(s)("t-success")),1),o("option",X,a(e(s)("t-pending")),1),o("option",ee,a(e(s)("t-failed")),1)]),_:1},8,["modelValue"])])]),_:1}),n(e(f),{md:"2"},{default:l(()=>[o("div",te,[o("label",se,a(e(s)("t-type")),1),n(e(V),{modelValue:e(r).type,"onUpdate:modelValue":d[2]||(d[2]=t=>e(r).type=t)},{default:l(()=>[o("option",ae,a(e(s)("t-all")),1),o("option",oe,a(e(s)("t-purchase")),1),o("option",le,a(e(s)("t-transfer")),1),o("option",ne,a(e(s)("t-credit")),1)]),_:1},8,["modelValue"])])]),_:1}),n(e(f),{md:"2"},{default:l(()=>[o("div",re,[o("label",de,a(e(s)("t-date-from")),1),v(o("input",{"onUpdate:modelValue":d[3]||(d[3]=t=>e(r).date_from=t),type:"date",class:"form-control"},null,512),[[k,e(r).date_from]])])]),_:1}),n(e(f),{md:"2"},{default:l(()=>[o("div",ie,[o("label",ce,a(e(s)("t-date-to")),1),v(o("input",{"onUpdate:modelValue":d[4]||(d[4]=t=>e(r).date_to=t),type:"date",class:"form-control"},null,512),[[k,e(r).date_to]])])]),_:1})]),_:1}),n(e(g),null,{default:l(()=>[n(e(f),{md:"12"},{default:l(()=>[o("div",ue,[n(e(B),{variant:"primary",onClick:U,class:"me-2"},{default:l(()=>[_e,c(" "+a(e(s)("t-apply-filters")),1)]),_:1}),n(e(B),{variant:"outline-primary",onClick:C},{default:l(()=>[pe,c(" "+a(e(s)("t-reset")),1)]),_:1})])]),_:1})]),_:1})]),o("div",me,[o("span",fe,[c(a(e(s)("t-total-transactions"))+": ",1),o("strong",null,a(e(m).total),1)])]),o("div",he,[n(e(I),{striped:"",hover:"",items:e(m).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"reference_id",label:e(s)("t-reference-id"),sortable:!0},{key:"from_user",label:e(s)("t-from"),sortable:!1},{key:"to_user",label:e(s)("t-to"),sortable:!1},{key:"amount",label:e(s)("t-amount"),sortable:!0},{key:"fee",label:e(s)("t-fee"),sortable:!0},{key:"type",label:e(s)("t-type"),sortable:!0},{key:"status",label:e(s)("t-status"),sortable:!0},{key:"created_at",label:e(s)("t-created-at"),sortable:!0},{key:"actions",label:e(s)("t-actions")}],class:"table-nowrap"},{"cell(row_number)":l(({index:t})=>[c(a((e(m).current_page-1)*e(m).per_page+t+1),1)]),"cell(reference_id)":l(({item:t})=>[o("code",null,a(t.reference_id),1)]),"cell(from_user)":l(({item:t})=>{var h;return[(h=t.from_wallet)!=null&&h.user?(u(),p("span",be,[c(a(t.from_wallet.user.name),1),ye,o("small",ge,a(t.from_wallet.user.phone),1)])):(u(),x(e(w),{key:1,variant:"secondary"},{default:l(()=>[c(a(e(s)("t-system")),1)]),_:1}))]}),"cell(to_user)":l(({item:t})=>{var h;return[(h=t.to_wallet)!=null&&h.user?(u(),p("span",ve,[c(a(t.to_wallet.user.name),1),ke,o("small",we,a(t.to_wallet.user.phone),1)])):(u(),p("span",xe,"-"))]}),"cell(amount)":l(({item:t})=>[o("span",{class:Y(["fw-bold",{"text-success":t.is_credit||t.has_credit&&!t.has_debit,"text-danger":t.is_debit||t.has_debit&&!t.has_credit}])},[t.is_credit||t.has_credit&&!t.has_debit?(u(),p("i",Ve)):t.is_debit||t.has_debit&&!t.has_credit?(u(),p("i",Be)):b("",!0),c(" "+a(t.display_amount||y(t.amount))+" "+a(e(s)("t-points")),1)],2),t.has_fee&&t.original_amount?(u(),p("div",Se,a(e(s)("t-from-original"))+" "+a(y(t.original_amount)),1)):b("",!0)]),"cell(fee)":l(({item:t})=>[t.has_fee?(u(),p("span",Ue,[c(a(y(t.fee))+" "+a(e(s)("t-points"))+" ",1),t.fee_percentage>0?(u(),p("span",Ce," ("+a(t.fee_percentage)+"%) ",1)):b("",!0)])):(u(),p("span",Te,"-"))]),"cell(type)":l(({item:t})=>[n(e(w),{variant:F(t.type)},{default:l(()=>[c(a(t.type),1)]),_:2},1032,["variant"])]),"cell(status)":l(({item:t})=>[n(e(w),{variant:D(t.status)},{default:l(()=>[c(a(t.status),1)]),_:2},1032,["variant"])]),"cell(created_at)":l(({item:t})=>[c(a(T(t.created_at)),1)]),"cell(actions)":l(({item:t})=>[n(e(j),{href:_.route("admin.transactions.show",t.id),class:"btn btn-outline-primary btn-sm"},{default:l(()=>[c(a(e(s)("t-view")),1)]),_:2},1032,["href"])]),_:1},8,["items","fields"])]),e(m).last_page>1?(u(),p("div",De,[n(e(E),{modelValue:e(m).current_page,"onUpdate:modelValue":d[5]||(d[5]=t=>e(m).current_page=t),"total-rows":e(m).total,"per-page":e(m).per_page,onPageClick:S},null,8,["modelValue","total-rows","per-page"])])):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Ee as default};
