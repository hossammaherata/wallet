import{i as H,Q as U,c as w,w as t,o as c,a as l,u as e,A,h as i,t as n,G as u,m as g,v,k as b,f as a,e as k,p as x,d as _,n as N,L as Y,l as D,Y as $,q as T}from"./app-BpXjbCMW.js";import{L as G}from"./main-B236rcsx.js";import{P as I}from"./page-header-DEyyf2_K.js";import{_ as S}from"./card-header-Ct8audyA.js";import{S as L}from"./sweetalert2.all-BXeenfYg.js";import"./simplebar-vue.esm-Ds3EkmLx.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-Bc94pPwb.js";import"./us-DIspYScJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"mb-3"},j={class:"form-label fw-semibold"},q={class:"form-control-plaintext"},z={class:"mb-3"},Q={class:"form-label fw-semibold"},R={class:"form-control-plaintext"},J={class:"mb-3"},K={class:"form-label fw-semibold"},O={class:"form-control-plaintext"},X={class:"mb-3"},Z={class:"form-label fw-semibold"},ee={class:"form-control-plaintext"},te={class:"badge bg-success"},se={class:"mb-3"},ae={class:"form-label fw-semibold"},le={class:"form-control-plaintext"},oe={class:"mb-3"},ne={class:"form-label fw-semibold"},re={class:"form-control-plaintext"},ce={class:"mb-3"},de={class:"form-label fw-semibold"},ie={class:"form-control-plaintext"},ue={class:"mb-3"},_e={class:"form-label fw-semibold"},me={class:"form-control-plaintext"},fe={class:"h4 text-primary fw-bold"},be={class:"mb-3"},pe={class:"form-label fw-semibold"},he={class:"d-flex align-items-center gap-2"},ye=["value"],ke={class:"table-responsive"},we={key:0},ge={key:1,class:"text-muted"},ve={key:0},xe={key:1,class:"text-muted"},Se={key:0},Be={class:"mb-3"},Ae={class:"text-muted"},Ne={class:"table-responsive"},Te={key:0},Ve=a("br",null,null,-1),De={class:"text-muted"},Le={key:0},Ce=a("br",null,null,-1),Fe={class:"text-muted"},Pe={key:1,class:"text-muted"},We={key:0,class:"ri-arrow-down-line text-success"},Ee={key:1,class:"ri-arrow-up-line text-danger"},He={key:0,class:"d-flex justify-content-center mt-3"},Ue={key:1,class:"text-center py-4"},Ye=a("p",{class:"text-muted"},"No transactions found",-1),$e=[Ye],Xe={__name:"Show",setup(Ge){const{t:o}=H(),{user:r,transactions:m,bankAccounts:B}=U().props,h=d=>d?new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",V=d=>parseFloat(d||0).toFixed(2),C=d=>({success:"success",pending:"warning",failed:"danger"})[d]||"secondary",F=d=>({purchase:"primary",transfer:"info",credit:"success",debit:"danger",refund:"warning"})[d]||"secondary",P=(d,p)=>{T.get(route("admin.users.show",r.id),{page:p},{preserveState:!0})},W=d=>{const p=d.target,f=new FormData(p).get("status");T.post(route("admin.users.updateWalletStatus",r.id),{status:f},{preserveState:!1,preserveScroll:!0,onSuccess:y=>{const E=o(f==="locked"?"t-locked":"t-active");L.fire({icon:"success",title:o("t-success"),text:`${o("t-wallet-status-updated")} ${E}`,timer:2e3,showConfirmButton:!1}),T.reload()},onError:y=>{L.fire({icon:"error",title:o("t-error"),text:y.message||o("t-an-error-occurred")})}})};return(d,p)=>(c(),w(G,null,{default:t(()=>[l(I,{title:e(o)("t-user-details"),pageTitle:e(o)("t-all-users"),href:d.route("admin.users.index")},{actions:t(()=>[l(e(A),{href:d.route("admin.users.edit",e(r).id),class:"btn btn-primary me-2"},{default:t(()=>[i(n(e(o)("t-edit-user")),1)]),_:1},8,["href"]),l(e(A),{href:d.route("admin.users.index"),class:"btn btn-outline-primary"},{default:t(()=>[i(n(e(o)("t-back-to-list")),1)]),_:1},8,["href"])]),_:1},8,["title","pageTitle","href"]),l(e(b),null,{default:t(()=>[l(e(u),{lg:"12"},{default:t(()=>[l(e(g),{"no-body":""},{default:t(()=>[l(S,{title:e(o)("t-user-information")},null,8,["title"]),l(e(v),null,{default:t(()=>[l(e(b),null,{default:t(()=>[l(e(u),{md:"6"},{default:t(()=>[a("div",M,[a("label",j,n(e(o)("t-full-name")),1),a("p",q,n(e(r).name),1)])]),_:1}),l(e(u),{md:"6"},{default:t(()=>[a("div",z,[a("label",Q,n(e(o)("t-username")),1),a("p",R,n(e(r).user_name),1)])]),_:1})]),_:1}),l(e(b),null,{default:t(()=>[l(e(u),{md:"6"},{default:t(()=>[a("div",J,[a("label",K,n(e(o)("t-email-address")),1),a("p",O,n(e(r).email),1)])]),_:1}),l(e(u),{md:"6"},{default:t(()=>[a("div",X,[a("label",Z,n(e(o)("t-user-type")),1),a("p",ee,[a("span",te,n(e(r).type),1)])])]),_:1})]),_:1}),l(e(b),null,{default:t(()=>[l(e(u),{md:"6"},{default:t(()=>[a("div",se,[a("label",ae,n(e(o)("t-created-at")),1),a("p",le,n(h(e(r).created_at)),1)])]),_:1}),l(e(u),{md:"6"},{default:t(()=>[a("div",oe,[a("label",ne,n(e(o)("t-last-updated")),1),a("p",re,n(h(e(r).updated_at)),1)])]),_:1})]),_:1}),e(r).email_verified_at?(c(),w(e(b),{key:0},{default:t(()=>[l(e(u),{md:"6"},{default:t(()=>[a("div",ce,[a("label",de,n(e(o)("t-email-verified-at")),1),a("p",ie,n(h(e(r).email_verified_at)),1)])]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),l(e(b),{class:"mt-4"},{default:t(()=>[l(e(u),{lg:"12"},{default:t(()=>[l(e(g),{"no-body":""},{default:t(()=>[l(S,{title:e(o)("t-wallet-information")},null,8,["title"]),l(e(v),null,{default:t(()=>[l(e(b),null,{default:t(()=>[l(e(u),{md:"6"},{default:t(()=>{var s;return[a("div",ue,[a("label",_e,n(e(o)("t-current-balance")),1),a("p",me,[a("span",fe,n(V(((s=e(r).wallet)==null?void 0:s.balance)||0))+" "+n(e(o)("t-points")),1)])])]}),_:1}),l(e(u),{md:"6"},{default:t(()=>{var s;return[a("div",be,[a("label",pe,n(e(o)("t-wallet-status")),1),a("div",he,[l(e(x),{variant:((s=e(r).wallet)==null?void 0:s.status)==="active"?"success":"danger"},{default:t(()=>{var f,y;return[i(n(((f=e(r).wallet)==null?void 0:f.status)==="active"?"Active":((y=e(r).wallet)==null?void 0:y.status)==="locked"?"Locked":"N/A"),1)]}),_:1},8,["variant"]),e(r).wallet?(c(),_("form",{key:0,onSubmit:Y(W,["prevent"]),class:"d-inline"},[a("input",{type:"hidden",name:"status",value:e(r).wallet.status==="active"?"locked":"active"},null,8,ye),a("button",{type:"submit",class:N(["btn btn-sm",e(r).wallet.status==="active"?"btn-warning":"btn-success"])},[a("i",{class:N(e(r).wallet.status==="active"?"ri-lock-line":"ri-lock-unlock-line")},null,2),i(" "+n(e(r).wallet.status==="active"?"Lock Wallet":"Unlock Wallet"),1)],2)],32)):k("",!0)])])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(B)&&e(B).length>0?(c(),w(e(b),{key:0,class:"mt-4"},{default:t(()=>[l(e(u),{lg:"12"},{default:t(()=>[l(e(g),{"no-body":""},{default:t(()=>[l(S,{title:e(o)("t-bank-accounts")||"Bank Accounts"},null,8,["title"]),l(e(v),null,{default:t(()=>[a("div",ke,[l(e(D),{striped:"",hover:"",items:e(B),fields:[{key:"bank_name",label:e(o)("t-bank-name")||"Bank Name"},{key:"account_holder_name",label:e(o)("t-account-holder-name")||"Account Holder"},{key:"account_number",label:e(o)("t-account-number")||"Account Number"},{key:"iban",label:"IBAN"},{key:"branch_name",label:e(o)("t-branch-name")||"Branch"},{key:"created_at",label:e(o)("t-created-at")}],class:"table-nowrap"},{"cell(iban)":t(({item:s})=>[s.iban?(c(),_("span",we,n(s.iban),1)):(c(),_("span",ge,"-"))]),"cell(branch_name)":t(({item:s})=>[s.branch_name?(c(),_("span",ve,n(s.branch_name),1)):(c(),_("span",xe,"-"))]),"cell(created_at)":t(({item:s})=>[i(n(h(s.created_at)),1)]),_:1},8,["items","fields"])])]),_:1})]),_:1})]),_:1})]),_:1})):k("",!0),l(e(b),{class:"mt-4"},{default:t(()=>[l(e(u),{lg:"12"},{default:t(()=>[l(e(g),{"no-body":""},{default:t(()=>[l(S,{title:"Transactions History"}),l(e(v),null,{default:t(()=>[e(m)&&e(m).data&&e(m).data.length>0?(c(),_("div",Se,[a("div",Be,[a("span",Ae,[i("Total Transactions: "),a("strong",null,n(e(m).total),1)])]),a("div",Ne,[l(e(D),{striped:"",hover:"",items:e(m).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"reference_id",label:e(o)("t-reference-id"),sortable:!0},{key:"from_user",label:e(o)("t-from"),sortable:!1},{key:"to_user",label:e(o)("t-to"),sortable:!1},{key:"amount",label:e(o)("t-amount"),sortable:!0},{key:"type",label:e(o)("t-type"),sortable:!0},{key:"status",label:e(o)("t-status"),sortable:!0},{key:"created_at",label:e(o)("t-date"),sortable:!0},{key:"actions",label:e(o)("t-actions")}],class:"table-nowrap"},{"cell(row_number)":t(({index:s})=>[i(n((e(m).current_page-1)*e(m).per_page+s+1),1)]),"cell(reference_id)":t(({item:s})=>[a("code",null,n(s.reference_id),1)]),"cell(from_user)":t(({item:s})=>{var f;return[(f=s.from_wallet)!=null&&f.user?(c(),_("span",Te,[i(n(s.from_wallet.user.name),1),Ve,a("small",De,n(s.from_wallet.user.phone),1)])):(c(),w(e(x),{key:1,variant:"secondary"},{default:t(()=>[i("SYSTEM")]),_:1}))]}),"cell(to_user)":t(({item:s})=>{var f;return[(f=s.to_wallet)!=null&&f.user?(c(),_("span",Le,[i(n(s.to_wallet.user.name),1),Ce,a("small",Fe,n(s.to_wallet.user.phone),1)])):(c(),_("span",Pe,"-"))]}),"cell(amount)":t(({item:s})=>[a("span",{class:N(["fw-bold",{"text-success":s.is_credit,"text-danger":s.is_debit}])},[s.is_credit?(c(),_("i",We)):s.is_debit?(c(),_("i",Ee)):k("",!0),i(" "+n(s.display_amount||V(s.amount))+" Points ",1)],2)]),"cell(type)":t(({item:s})=>[l(e(x),{variant:F(s.type)},{default:t(()=>[i(n(s.type),1)]),_:2},1032,["variant"])]),"cell(status)":t(({item:s})=>[l(e(x),{variant:C(s.status)},{default:t(()=>[i(n(s.status),1)]),_:2},1032,["variant"])]),"cell(created_at)":t(({item:s})=>[i(n(h(s.created_at)),1)]),"cell(actions)":t(({item:s})=>[l(e(A),{href:d.route("admin.transactions.show",s.id),class:"btn btn-info btn-sm"},{default:t(()=>[i(" View ")]),_:2},1032,["href"])]),_:1},8,["items","fields"])]),e(m).last_page>1?(c(),_("div",He,[l(e($),{modelValue:e(m).current_page,"onUpdate:modelValue":p[0]||(p[0]=s=>e(m).current_page=s),"total-rows":e(m).total,"per-page":e(m).per_page,onPageClick:P},null,8,["modelValue","total-rows","per-page"])])):k("",!0)])):(c(),_("div",Ue,$e))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Xe as default};
