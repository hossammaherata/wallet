import{Q as L,T as D,c as f,w as a,o as m,a as s,u as t,Z as N,G as T,m as W,j as v,h as r,k as P,f as d,t as c,q as $,s as k,d as w,p as b,n as z,e as g,Y,l as E,y as S}from"./app-p6nL2sIh.js";import{L as F}from"./main-DD0YxTIO.js";import{P as G}from"./page-header-D_lLMvKR.js";import{_ as R}from"./card-header-7vgZfBgl.js";import{S as _}from"./sweetalert2.all-G6W_N5Gt.js";import"./simplebar-vue.esm-Dfq80Hnp.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-BfYujB8V.js";import"./russia-pMTSjNGF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U=d("i",{class:"ri-add-line align-middle me-1"},null,-1),j={class:"mb-3"},q={class:"text-muted"},H={class:"table-responsive"},I={class:"fw-bold"},M={key:1,class:"text-muted"},Q={key:0,class:"d-flex justify-content-center mt-3"},oe={__name:"Index",setup(Z){const{stores:n,keyword:y}=L().props,u=D({page:1,keyword:y||""}),p=(l,o)=>{u.page=o||u.page,u.get(route("admin.stores.index"),{},{preserveState:!0})},h=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),C=l=>parseFloat(l||0).toFixed(2),x=l=>{_.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(o=>{o.isConfirmed&&S.delete(route("admin.stores.destroy",l),{onSuccess:()=>{p(),_.fire("Deleted!","Store has been deleted.","success")}})})},B=(l,o)=>{const e=o==="active"?"suspended":"active";S.post(route("admin.stores.updateStatus",l),{status:e},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{p(),_.fire("Success!","Store status updated successfully.","success")}})},A=(l,o)=>{const e=o==="active"?"locked":"active";S.post(route("admin.stores.updateWalletStatus",l),{status:e},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{p();const i=e==="locked"?"Locked":"Active";_.fire("Success!",`Wallet status updated to: ${i}`,"success")}})},V=()=>{u.keyword="",u.page=1,u.get(route("admin.stores.index"),{},{preserveState:!0})};return(l,o)=>(m(),f(F,null,{default:a(()=>[s(t(N),{title:"Stores"}),s(G,{title:"Stores",pageTitle:"Stores Management"}),s(t(E),null,{default:a(()=>[s(t(T),{lg:"12"},{default:a(()=>[s(t(W),{"no-body":""},{default:a(()=>[s(R,{title:"Stores List",model:t(u),SearchButton:"true",onGetResourese:p,onReset:V},{actions:a(()=>[s(t(v),{href:l.route("admin.stores.create"),class:"btn btn-primary"},{default:a(()=>[U,r(" Add New Store ")]),_:1},8,["href"])]),_:1},8,["model"]),s(t(P),null,{default:a(()=>[d("div",j,[d("span",q,[r("Total Stores: "),d("strong",null,c(t(n).total),1)])]),d("div",H,[s(t($),{striped:"",hover:"",items:t(n).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"name",label:"Store Name",sortable:!0},{key:"phone",label:"Phone",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"balance",label:"Balance",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"wallet_status",label:"Wallet Status",sortable:!0},{key:"created_at",label:"Created At",sortable:!0},{key:"actions",label:"Actions"}],class:"table-nowrap"},{"cell(row_number)":a(({index:e})=>[r(c((t(n).current_page-1)*t(n).per_page+e+1),1)]),"cell(balance)":a(({item:e})=>{var i;return[d("span",I,c(C((i=e.wallet)==null?void 0:i.balance))+" Points",1)]}),"cell(status)":a(({item:e})=>[s(t(k),{variant:e.status==="active"?"success":"danger"},{default:a(()=>[r(c(e.status==="active"?"Active":"Suspended"),1)]),_:2},1032,["variant"])]),"cell(wallet_status)":a(({item:e})=>[e.wallet?(m(),f(t(k),{key:0,variant:e.wallet.status==="active"?"success":"danger"},{default:a(()=>[r(c(e.wallet.status==="active"?"Active":"Locked"),1)]),_:2},1032,["variant"])):(m(),w("span",M,"-"))]),"cell(created_at)":a(({item:e})=>[r(c(h(e.created_at)),1)]),"cell(actions)":a(({item:e})=>[s(t(v),{href:l.route("admin.stores.show",e.id),class:"btn btn-info btn-sm me-1"},{default:a(()=>[r(" View ")]),_:2},1032,["href"]),s(t(b),{variant:"warning",size:"sm",class:"me-1",onClick:i=>B(e.id,e.status)},{default:a(()=>[r(c(e.status==="active"?"Suspend":"Activate"),1)]),_:2},1032,["onClick"]),e.wallet?(m(),f(t(b),{key:0,variant:e.wallet.status==="active"?"warning":"success",size:"sm",class:"me-1",onClick:i=>A(e.id,e.wallet.status)},{default:a(()=>[d("i",{class:z(e.wallet.status==="active"?"ri-lock-line":"ri-lock-unlock-line")},null,2),r(" "+c(e.wallet.status==="active"?"Lock Wallet":"Unlock Wallet"),1)]),_:2},1032,["variant","onClick"])):g("",!0),s(t(v),{href:l.route("admin.stores.edit",e.id),class:"btn btn-primary btn-sm me-1"},{default:a(()=>[r(" Edit ")]),_:2},1032,["href"]),s(t(b),{variant:"danger",size:"sm",onClick:i=>x(e.id)},{default:a(()=>[r(" Delete ")]),_:2},1032,["onClick"])]),_:1},8,["items"])]),t(n).last_page>1?(m(),w("div",Q,[s(t(Y),{modelValue:t(n).current_page,"onUpdate:modelValue":o[0]||(o[0]=e=>t(n).current_page=e),"total-rows":t(n).total,"per-page":t(n).per_page,onPageClick:p},null,8,["modelValue","total-rows","per-page"])])):g("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{oe as default};
