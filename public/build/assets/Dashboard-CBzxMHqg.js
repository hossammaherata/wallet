import{i as Q,Q as I,j as C,c as B,w as s,o as d,a as o,u as t,Z as N,G as _,m,v as p,f as e,t as a,k as x,y as q,h as f,d as i,l as R,e as h,n as U,Y as F,q as L,s as P,x as T}from"./app-BpXjbCMW.js";import{L as $}from"./main-B236rcsx.js";import{P as A}from"./page-header-DEyyf2_K.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./simplebar-vue.esm-Ds3EkmLx.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-Bc94pPwb.js";import"./us-DIspYScJ.js";const u=b=>(P("data-v-d8412ec3"),b=b(),T(),b),Y=u(()=>e("div",{class:"d-flex align-items-center justify-content-center mb-3"},[e("div",{class:"avatar-sm mx-auto"},[e("div",{class:"avatar-title bg-primary-subtle text-primary rounded-circle fs-22"},[e("i",{class:"ri-money-dollar-circle-line"})])])],-1)),z={class:"mb-1"},E={class:"text-muted mb-0"},H=u(()=>e("div",{class:"d-flex align-items-center justify-content-center mb-3"},[e("div",{class:"avatar-sm mx-auto"},[e("div",{class:"avatar-title bg-success-subtle text-success rounded-circle fs-22"},[e("i",{class:"ri-file-list-line"})])])],-1)),W={class:"mb-1"},Z={class:"text-muted mb-0"},J=u(()=>e("div",{class:"d-flex align-items-center justify-content-center mb-3"},[e("div",{class:"avatar-sm mx-auto"},[e("div",{class:"avatar-title bg-info-subtle text-info rounded-circle fs-22"},[e("i",{class:"ri-wallet-line"})])])],-1)),K={class:"mb-1"},M={class:"text-muted mb-0"},O={class:"d-flex align-items-center justify-content-between mb-3"},X={class:"card-title mb-0"},tt=u(()=>e("i",{class:"ri-download-line me-1"},null,-1)),et=u(()=>e("i",{class:"ri-printer-line me-1"},null,-1)),st={class:"text-center p-4 bg-light rounded"},at={class:"mb-3"},ot=["src"],lt={class:"text-muted mb-0"},nt=u(()=>e("br",null,null,-1)),rt={class:"d-flex align-items-center justify-content-between mb-3"},ct={class:"card-title mb-0"},dt={key:0},it={class:"mb-3"},ut={class:"text-muted"},_t={class:"table-responsive"},mt={key:0},pt={key:1,class:"text-muted"},ft={key:2},ht={key:3,class:"text-muted"},bt={key:4},gt={key:5,class:"text-muted"},yt={key:0,class:"d-flex justify-content-center mt-3"},vt={key:1,class:"text-center py-4"},xt={class:"text-muted"},wt={__name:"Dashboard",setup(b){const{t:n}=Q(),{store:w,stats:y,transactions:r}=I().props,k=C(()=>route("store.qr-code")),S=C(()=>route("store.qr-code.download")),j=c=>c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",v=c=>parseFloat(c||0).toFixed(2),V=(c,g)=>{L.get(route("store.dashboard"),{page:g},{preserveState:!0})},D=()=>{const c=window.open("","_blank");c.document.write(`
        <html>
            <head>
                <title>Store QR Code</title>
                <style>
                    body {
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        height: 100vh;
                        margin: 0;
                        font-family: Arial, sans-serif;
                    }
                    .qr-container {
                        text-align: center;
                    }
                    .qr-container h2 {
                        margin-bottom: 20px;
                    }
                    .qr-container img {
                        max-width: 500px;
                        height: auto;
                    }
                </style>
            </head>
            <body>
                <div class="qr-container">
                    <h2>${w.name} - ${n("t-store-qr-code")}</h2>
                    <img src="${k.value}" alt="Store QR Code" />
                </div>
            </body>
        </html>
    `),c.document.close(),c.onload=()=>{c.print()}};return(c,g)=>(d(),B($,null,{default:s(()=>[o(t(N),{title:t(n)("t-store-dashboard-title")},null,8,["title"]),o(A,{title:t(n)("t-store-dashboard-title"),pageTitle:t(n)("t-store-dashboard")},null,8,["title","pageTitle"]),o(t(x),{class:"mb-4"},{default:s(()=>[o(t(_),{md:"4"},{default:s(()=>[o(t(m),{class:"text-center"},{default:s(()=>[o(t(p),null,{default:s(()=>[Y,e("h4",z,[e("span",null,a(v(t(y).total_payments)),1)]),e("p",E,a(t(n)("t-total-payments")),1)]),_:1})]),_:1})]),_:1}),o(t(_),{md:"4"},{default:s(()=>[o(t(m),{class:"text-center"},{default:s(()=>[o(t(p),null,{default:s(()=>[H,e("h4",W,[e("span",null,a(t(y).transaction_count),1)]),e("p",Z,a(t(n)("t-transaction-count")),1)]),_:1})]),_:1})]),_:1}),o(t(_),{md:"4"},{default:s(()=>[o(t(m),{class:"text-center"},{default:s(()=>[o(t(p),null,{default:s(()=>[J,e("h4",K,[e("span",null,a(v(t(y).current_balance)),1)]),e("p",M,a(t(n)("t-current-balance-debt")),1)]),_:1})]),_:1})]),_:1})]),_:1}),o(t(x),{class:"mb-4"},{default:s(()=>[o(t(_),{lg:"12"},{default:s(()=>[o(t(m),{"no-body":""},{default:s(()=>[o(t(p),null,{default:s(()=>[e("div",O,[e("h5",X,a(t(n)("t-store-qr-code")),1),e("div",null,[o(t(q),{variant:"primary",class:"me-2",href:S.value,target:"_blank"},{default:s(()=>[tt,f(" "+a(t(n)("t-download")),1)]),_:1},8,["href"]),o(t(q),{variant:"info",onClick:D},{default:s(()=>[et,f(" "+a(t(n)("t-print")),1)]),_:1})])]),e("div",st,[e("div",at,[e("img",{src:k.value,alt:"Store QR Code",class:"img-fluid",style:{"max-width":"300px"}},null,8,ot)]),e("p",lt,[e("strong",null,a(t(w).name),1),nt,e("small",null,a(t(n)("t-scan-to-pay")),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),o(t(x),null,{default:s(()=>[o(t(_),{lg:"12"},{default:s(()=>[o(t(m),{"no-body":""},{default:s(()=>[o(t(p),null,{default:s(()=>[e("div",rt,[e("h5",ct,a(t(n)("t-transactions-log")),1)]),t(r)&&t(r).data&&t(r).data.length>0?(d(),i("div",dt,[e("div",it,[e("span",ut,[f(a(t(n)("t-total-transactions-count"))+": ",1),e("strong",null,a(t(r).total),1)])]),e("div",_t,[o(t(R),{striped:"",hover:"",items:t(r).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"customer_name",label:t(n)("t-description"),sortable:!1},{key:"amount",label:t(n)("t-amount"),sortable:!0},{key:"reference_id",label:t(n)("t-reference-id"),sortable:!1},{key:"created_at",label:t(n)("t-date"),sortable:!0}],class:"table-nowrap"},{"cell(row_number)":s(({index:l})=>[f(a((t(r).current_page-1)*t(r).per_page+l+1),1)]),"cell(customer_name)":s(({item:l})=>[e("div",null,[l.customer_name?(d(),i("span",mt,a(l.customer_name),1)):(d(),i("span",pt,a(t(n)("t-unknown")),1)),l.transaction_type_label?(d(),i("br",ft)):h("",!0),l.transaction_type_label?(d(),i("small",ht,a(l.transaction_type_label),1)):h("",!0),l.note?(d(),i("br",bt)):h("",!0),l.note?(d(),i("small",gt,a(t(n)("t-note"))+": "+a(l.note),1)):h("",!0)])]),"cell(amount)":s(({item:l})=>[e("span",{class:U(["fw-bold",l.is_credit?"text-success":"text-danger"])},a(l.amount_formatted||(l.is_credit?"+":"-")+v(l.amount))+" "+a(t(n)("t-points")),3)]),"cell(reference_id)":s(({item:l})=>[e("code",null,a(l.reference_id),1)]),"cell(created_at)":s(({item:l})=>[f(a(l.date_formatted||j(l.created_at)),1)]),_:1},8,["items","fields"])]),t(r).last_page>1?(d(),i("div",yt,[o(t(F),{modelValue:t(r).current_page,"onUpdate:modelValue":g[0]||(g[0]=l=>t(r).current_page=l),"total-rows":t(r).total,"per-page":t(r).per_page,onPageClick:V},null,8,["modelValue","total-rows","per-page"])])):h("",!0)])):(d(),i("div",vt,[e("p",xt,a(t(n)("t-no-transactions")),1)]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},It=G(wt,[["__scopeId","data-v-d8412ec3"]]);export{It as default};
