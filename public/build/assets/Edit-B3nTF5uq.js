import{b as k,T as U,c as w,w as t,o as v,a as s,u as e,G as i,m as E,k as B,l as p,f as l,n,i as b,x as V,d as C,e as x,h as g,t as I,p as L,j as N}from"./app-p6nL2sIh.js";import{L as T}from"./main-DD0YxTIO.js";import{P as G}from"./page-header-D_lLMvKR.js";import{_ as $}from"./card-header-7vgZfBgl.js";import{_ as O}from"./FormSection-BSW2Gw0F.js";import{_ as u}from"./InputLabel-Bl9hrtF0.js";import{_ as f}from"./TextInput--O2LRaf_.js";import{_ as c}from"./InputError-Cz3BRyQj.js";import{S as y}from"./sweetalert2.all-G6W_N5Gt.js";import"./simplebar-vue.esm-Dfq80Hnp.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-BfYujB8V.js";import"./russia-pMTSjNGF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"mb-3"},j={class:"mb-3"},D={class:"mb-3"},F={class:"mb-3"},M={class:"d-flex gap-4 mt-2"},q={class:"form-check"},z=l("label",{class:"form-check-label",for:"status_active"}," Active ",-1),K={class:"form-check"},A=l("label",{class:"form-check-label",for:"status_suspended"}," Suspended ",-1),H={class:"mb-3"},J=l("small",{class:"text-muted"},"Max size: 2MB. Supported formats: JPG, PNG, GIF",-1),W={key:0,class:"mt-3"},Q=["src"],X={class:"mb-3"},Y={class:"mb-3"},Z={class:"alert alert-info"},ee=l("strong",null,"Wallet Balance:",-1),_e={__name:"Edit",props:{store:Object},setup(_){const d=_;console.log("Edit Store Data:",d.store),console.log("Profile Photo URL:",d.store.profile_photo_url);const h=k(d.store.profile_photo_url||null),o=U({_method:"PUT",name:d.store.name||"",email:d.store.email||"",phone:d.store.phone||"",status:d.store.status||"active",password:"",password_confirmation:"",photo:null}),S=m=>{const a=m.target.files[0];a&&(o.photo=a,h.value=URL.createObjectURL(a))},P=()=>{const m=document.getElementById("photo");m&&m.files&&m.files[0]&&(o.photo=m.files[0]),o.post(route("admin.stores.update",d.store.id),{preserveScroll:!0,onSuccess:()=>{y.fire({title:"Success!",text:"Store updated successfully",icon:"success",confirmButtonText:"OK"})},onError:a=>{console.log("Errors:",a),y.fire({title:"Error!",text:"Something went wrong",icon:"error",confirmButtonText:"OK"})}})};return(m,a)=>(v(),w(T,null,{default:t(()=>[s(G,{title:"Edit Store",pageTitle:"Edit Store Information"}),s(e(p),null,{default:t(()=>[s(e(i),{lg:"12"},{default:t(()=>[s(e(E),{"no-body":""},{default:t(()=>[s($,{title:"Edit Store Information"}),s(e(B),null,{default:t(()=>[s(O,{onSubmitted:P},{form:t(()=>[s(e(p),null,{default:t(()=>[s(e(i),{md:"6"},{default:t(()=>[l("div",R,[s(u,{for:"name",value:"Store Name *"}),s(f,{id:"name",modelValue:e(o).name,"onUpdate:modelValue":a[0]||(a[0]=r=>e(o).name=r),type:"text",class:n(["form-control",{"is-invalid":e(o).errors.name}]),required:""},null,8,["modelValue","class"]),s(c,{message:e(o).errors.name},null,8,["message"])])]),_:1}),s(e(i),{md:"6"},{default:t(()=>[l("div",j,[s(u,{for:"phone",value:"Phone *"}),s(f,{id:"phone",modelValue:e(o).phone,"onUpdate:modelValue":a[1]||(a[1]=r=>e(o).phone=r),type:"text",class:n(["form-control",{"is-invalid":e(o).errors.phone}]),required:""},null,8,["modelValue","class"]),s(c,{message:e(o).errors.phone},null,8,["message"])])]),_:1})]),_:1}),s(e(p),null,{default:t(()=>[s(e(i),{md:"6"},{default:t(()=>[l("div",D,[s(u,{for:"email",value:"Email"}),s(f,{id:"email",modelValue:e(o).email,"onUpdate:modelValue":a[2]||(a[2]=r=>e(o).email=r),type:"email",class:n(["form-control",{"is-invalid":e(o).errors.email}])},null,8,["modelValue","class"]),s(c,{message:e(o).errors.email},null,8,["message"])])]),_:1}),s(e(i),{md:"6"},{default:t(()=>[l("div",F,[s(u,{value:"Status *"}),l("div",M,[l("div",q,[b(l("input",{class:n(["form-check-input",{"is-invalid":e(o).errors.status}]),type:"radio",name:"status",id:"status_active",value:"active","onUpdate:modelValue":a[3]||(a[3]=r=>e(o).status=r)},null,2),[[V,e(o).status]]),z]),l("div",K,[b(l("input",{class:n(["form-check-input",{"is-invalid":e(o).errors.status}]),type:"radio",name:"status",id:"status_suspended",value:"suspended","onUpdate:modelValue":a[4]||(a[4]=r=>e(o).status=r)},null,2),[[V,e(o).status]]),A])]),s(c,{message:e(o).errors.status},null,8,["message"])])]),_:1})]),_:1}),s(e(p),null,{default:t(()=>[s(e(i),{md:"12"},{default:t(()=>[l("div",H,[s(u,{for:"photo",value:"Profile Photo"}),l("input",{type:"file",id:"photo",onChange:S,accept:"image/*",class:n(["form-control",{"is-invalid":e(o).errors.photo}])},null,34),J,s(c,{message:e(o).errors.photo},null,8,["message"]),h.value?(v(),C("div",W,[l("img",{src:h.value,alt:"Profile Photo",class:"img-thumbnail",style:{"max-width":"200px","max-height":"200px"}},null,8,Q)])):x("",!0)])]),_:1})]),_:1}),s(e(p),null,{default:t(()=>[s(e(i),{md:"6"},{default:t(()=>[l("div",X,[s(u,{for:"password",value:"Password (Leave blank to keep current)"}),s(f,{id:"password",modelValue:e(o).password,"onUpdate:modelValue":a[5]||(a[5]=r=>e(o).password=r),type:"password",class:n(["form-control",{"is-invalid":e(o).errors.password}])},null,8,["modelValue","class"]),s(c,{message:e(o).errors.password},null,8,["message"])])]),_:1}),s(e(i),{md:"6"},{default:t(()=>[l("div",Y,[s(u,{for:"password_confirmation",value:"Confirm Password"}),s(f,{id:"password_confirmation",modelValue:e(o).password_confirmation,"onUpdate:modelValue":a[6]||(a[6]=r=>e(o).password_confirmation=r),type:"password",class:n(["form-control",{"is-invalid":e(o).errors.password_confirmation}])},null,8,["modelValue","class"]),s(c,{message:e(o).errors.password_confirmation},null,8,["message"])])]),_:1})]),_:1}),_.store.wallet?(v(),w(e(p),{key:0},{default:t(()=>[s(e(i),{md:"12"},{default:t(()=>[l("div",Z,[ee,g(" "+I(parseFloat(_.store.wallet.balance||0).toFixed(2))+" Points ",1)])]),_:1})]),_:1})):x("",!0)]),actions:t(()=>[s(e(L),{variant:"success",type:"submit",class:n({"opacity-25":e(o).processing}),disabled:e(o).processing},{default:t(()=>[g(" Update Store ")]),_:1},8,["class","disabled"]),s(e(N),{href:m.route("admin.stores.index"),class:"btn btn-secondary ms-2"},{default:t(()=>[g(" Back to Stores ")]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{_e as default};
