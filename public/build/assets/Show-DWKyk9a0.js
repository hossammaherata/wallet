import{Q as N,c as y,w as t,o as i,a as l,u as e,j as v,h as c,G as u,m as k,k as x,l as p,f as s,t as o,e as w,s as g,d as m,n as S,z as W,q as F,Y as P,y as A}from"./app-p6nL2sIh.js";import{L as I}from"./main-DD0YxTIO.js";import{P as Y}from"./page-header-D_lLMvKR.js";import{_ as T}from"./card-header-7vgZfBgl.js";import{S as U}from"./sweetalert2.all-G6W_N5Gt.js";import"./simplebar-vue.esm-Dfq80Hnp.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-BfYujB8V.js";import"./russia-pMTSjNGF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"mb-3"},z=s("label",{class:"form-label fw-semibold"},"Full Name",-1),G={class:"form-control-plaintext"},H={class:"mb-3"},M=s("label",{class:"form-label fw-semibold"},"Username",-1),R={class:"form-control-plaintext"},$={class:"mb-3"},q=s("label",{class:"form-label fw-semibold"},"Email Address",-1),Q={class:"form-control-plaintext"},J={class:"mb-3"},K=s("label",{class:"form-label fw-semibold"},"User Type",-1),O={class:"form-control-plaintext"},X={class:"badge bg-success"},Z={class:"mb-3"},ee=s("label",{class:"form-label fw-semibold"},"Created At",-1),te={class:"form-control-plaintext"},se={class:"mb-3"},ae=s("label",{class:"form-label fw-semibold"},"Last Updated",-1),le={class:"form-control-plaintext"},oe={class:"mb-3"},re=s("label",{class:"form-label fw-semibold"},"Email Verified At",-1),ne={class:"form-control-plaintext"},ce={class:"mb-3"},de=s("label",{class:"form-label fw-semibold"},"Current Balance",-1),ie={class:"form-control-plaintext"},ue={class:"h4 text-primary fw-bold"},_e={class:"mb-3"},me=s("label",{class:"form-label fw-semibold"},"Wallet Status",-1),fe={class:"d-flex align-items-center gap-2"},pe=["value"],be={key:0},he={class:"mb-3"},we={class:"text-muted"},ge={class:"table-responsive"},ye={key:0},ve=s("br",null,null,-1),ke={class:"text-muted"},xe={key:0},Se=s("br",null,null,-1),Ae={class:"text-muted"},Te={key:1,class:"text-muted"},De={key:0,class:"ri-arrow-down-line text-success"},Ue={key:1,class:"ri-arrow-up-line text-danger"},Be={key:0,class:"d-flex justify-content-center mt-3"},Ve={key:1,class:"text-center py-4"},Le=s("p",{class:"text-muted"},"No transactions found",-1),Ce=[Le],Me={__name:"Show",setup(Ee){const{user:r,transactions:d}=N().props,h=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",D=n=>parseFloat(n||0).toFixed(2),B=n=>({success:"success",pending:"warning",failed:"danger"})[n]||"secondary",V=n=>({purchase:"primary",transfer:"info",credit:"success",debit:"danger",refund:"warning"})[n]||"secondary",L=(n,f)=>{A.get(route("admin.users.show",r.id),{page:f},{preserveState:!0})},C=n=>{const f=n.target,_=new FormData(f).get("status");A.post(route("admin.users.updateWalletStatus",r.id),{status:_},{preserveState:!1,preserveScroll:!0,onSuccess:b=>{const E=_==="locked"?"Locked":"Active";U.fire({icon:"success",title:"Success!",text:`Wallet status updated to: ${E}`,timer:2e3,showConfirmButton:!1}),A.reload()},onError:b=>{U.fire({icon:"error",title:"Error!",text:b.message||"An error occurred while updating wallet status"})}})};return(n,f)=>(i(),y(I,null,{default:t(()=>[l(Y,{title:"User Details",pageTitle:"All Users",href:n.route("admin.users.index")},{actions:t(()=>[l(e(v),{href:n.route("admin.users.edit",e(r).id),class:"btn btn-warning me-2"},{default:t(()=>[c(" Edit User ")]),_:1},8,["href"]),l(e(v),{href:n.route("admin.users.index"),class:"btn btn-secondary"},{default:t(()=>[c(" Back to List ")]),_:1},8,["href"])]),_:1},8,["href"]),l(e(p),null,{default:t(()=>[l(e(u),{lg:"12"},{default:t(()=>[l(e(k),{"no-body":""},{default:t(()=>[l(T,{title:"User Information"}),l(e(x),null,{default:t(()=>[l(e(p),null,{default:t(()=>[l(e(u),{md:"6"},{default:t(()=>[s("div",j,[z,s("p",G,o(e(r).name),1)])]),_:1}),l(e(u),{md:"6"},{default:t(()=>[s("div",H,[M,s("p",R,o(e(r).user_name),1)])]),_:1})]),_:1}),l(e(p),null,{default:t(()=>[l(e(u),{md:"6"},{default:t(()=>[s("div",$,[q,s("p",Q,o(e(r).email),1)])]),_:1}),l(e(u),{md:"6"},{default:t(()=>[s("div",J,[K,s("p",O,[s("span",X,o(e(r).type),1)])])]),_:1})]),_:1}),l(e(p),null,{default:t(()=>[l(e(u),{md:"6"},{default:t(()=>[s("div",Z,[ee,s("p",te,o(h(e(r).created_at)),1)])]),_:1}),l(e(u),{md:"6"},{default:t(()=>[s("div",se,[ae,s("p",le,o(h(e(r).updated_at)),1)])]),_:1})]),_:1}),e(r).email_verified_at?(i(),y(e(p),{key:0},{default:t(()=>[l(e(u),{md:"6"},{default:t(()=>[s("div",oe,[re,s("p",ne,o(h(e(r).email_verified_at)),1)])]),_:1})]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),l(e(p),{class:"mt-4"},{default:t(()=>[l(e(u),{lg:"12"},{default:t(()=>[l(e(k),{"no-body":""},{default:t(()=>[l(T,{title:"Wallet Information"}),l(e(x),null,{default:t(()=>[l(e(p),null,{default:t(()=>[l(e(u),{md:"6"},{default:t(()=>{var a;return[s("div",ce,[de,s("p",ie,[s("span",ue,o(D(((a=e(r).wallet)==null?void 0:a.balance)||0))+" Points ",1)])])]}),_:1}),l(e(u),{md:"6"},{default:t(()=>{var a;return[s("div",_e,[me,s("div",fe,[l(e(g),{variant:((a=e(r).wallet)==null?void 0:a.status)==="active"?"success":"danger"},{default:t(()=>{var _,b;return[c(o(((_=e(r).wallet)==null?void 0:_.status)==="active"?"Active":((b=e(r).wallet)==null?void 0:b.status)==="locked"?"Locked":"N/A"),1)]}),_:1},8,["variant"]),e(r).wallet?(i(),m("form",{key:0,onSubmit:W(C,["prevent"]),class:"d-inline"},[s("input",{type:"hidden",name:"status",value:e(r).wallet.status==="active"?"locked":"active"},null,8,pe),s("button",{type:"submit",class:S(["btn btn-sm",e(r).wallet.status==="active"?"btn-warning":"btn-success"])},[s("i",{class:S(e(r).wallet.status==="active"?"ri-lock-line":"ri-lock-unlock-line")},null,2),c(" "+o(e(r).wallet.status==="active"?"Lock Wallet":"Unlock Wallet"),1)],2)],32)):w("",!0)])])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(e(p),{class:"mt-4"},{default:t(()=>[l(e(u),{lg:"12"},{default:t(()=>[l(e(k),{"no-body":""},{default:t(()=>[l(T,{title:"Transactions History"}),l(e(x),null,{default:t(()=>[e(d)&&e(d).data&&e(d).data.length>0?(i(),m("div",be,[s("div",he,[s("span",we,[c("Total Transactions: "),s("strong",null,o(e(d).total),1)])]),s("div",ge,[l(e(F),{striped:"",hover:"",items:e(d).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"reference_id",label:"Reference ID",sortable:!0},{key:"from_user",label:"From",sortable:!1},{key:"to_user",label:"To",sortable:!1},{key:"amount",label:"Amount",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"created_at",label:"Date",sortable:!0},{key:"actions",label:"Actions"}],class:"table-nowrap"},{"cell(row_number)":t(({index:a})=>[c(o((e(d).current_page-1)*e(d).per_page+a+1),1)]),"cell(reference_id)":t(({item:a})=>[s("code",null,o(a.reference_id),1)]),"cell(from_user)":t(({item:a})=>{var _;return[(_=a.from_wallet)!=null&&_.user?(i(),m("span",ye,[c(o(a.from_wallet.user.name),1),ve,s("small",ke,o(a.from_wallet.user.phone),1)])):(i(),y(e(g),{key:1,variant:"secondary"},{default:t(()=>[c("SYSTEM")]),_:1}))]}),"cell(to_user)":t(({item:a})=>{var _;return[(_=a.to_wallet)!=null&&_.user?(i(),m("span",xe,[c(o(a.to_wallet.user.name),1),Se,s("small",Ae,o(a.to_wallet.user.phone),1)])):(i(),m("span",Te,"-"))]}),"cell(amount)":t(({item:a})=>[s("span",{class:S(["fw-bold",{"text-success":a.is_credit,"text-danger":a.is_debit}])},[a.is_credit?(i(),m("i",De)):a.is_debit?(i(),m("i",Ue)):w("",!0),c(" "+o(a.display_amount||D(a.amount))+" Points ",1)],2)]),"cell(type)":t(({item:a})=>[l(e(g),{variant:V(a.type)},{default:t(()=>[c(o(a.type),1)]),_:2},1032,["variant"])]),"cell(status)":t(({item:a})=>[l(e(g),{variant:B(a.status)},{default:t(()=>[c(o(a.status),1)]),_:2},1032,["variant"])]),"cell(created_at)":t(({item:a})=>[c(o(h(a.created_at)),1)]),"cell(actions)":t(({item:a})=>[l(e(v),{href:n.route("admin.transactions.show",a.id),class:"btn btn-info btn-sm"},{default:t(()=>[c(" View ")]),_:2},1032,["href"])]),_:1},8,["items"])]),e(d).last_page>1?(i(),m("div",Be,[l(e(P),{modelValue:e(d).current_page,"onUpdate:modelValue":f[0]||(f[0]=a=>e(d).current_page=a),"total-rows":e(d).total,"per-page":e(d).per_page,onPageClick:L},null,8,["modelValue","total-rows","per-page"])])):w("",!0)])):(i(),m("div",Ve,Ce))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Me as default};
