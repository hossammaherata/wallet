import{Q as V,T as L,c as f,w as a,o as m,a as s,u as t,Z as D,G as N,m as T,j as v,h as r,k as W,f as d,t as u,q as P,s as w,d as g,p as b,n as $,e as y,Y as z,l as Y,y as k}from"./app-p6nL2sIh.js";import{L as E}from"./main-DD0YxTIO.js";import{P as F}from"./page-header-D_lLMvKR.js";import{_ as G}from"./card-header-7vgZfBgl.js";import{S as _}from"./sweetalert2.all-G6W_N5Gt.js";import"./simplebar-vue.esm-Dfq80Hnp.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-BfYujB8V.js";import"./russia-pMTSjNGF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R=d("i",{class:"ri-add-line align-middle me-1"},null,-1),j={class:"mb-3"},q={class:"text-muted"},H={class:"table-responsive"},I={class:"fw-bold"},M={key:1,class:"text-muted"},Q={key:0,class:"d-flex justify-content-center mt-3"},oe={__name:"Index",setup(Z){const{users:n,keyword:S}=V().props,c=L({page:1,keyword:S||""}),p=(l,o)=>{c.page=o||c.page,c.get(route("admin.users.index"),{},{preserveState:!0})},h=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),C=l=>parseFloat(l||0).toFixed(2),U=l=>{_.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(o=>{o.isConfirmed&&k.delete(route("admin.users.destroy",l),{onSuccess:()=>{p(),_.fire("Deleted!","User has been deleted.","success")}})})},x=(l,o)=>{const e=o==="active"?"suspended":"active";k.post(route("admin.users.updateStatus",l),{status:e},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{p(),_.fire("Success!","User status updated successfully.","success")}})},B=(l,o)=>{const e=o==="active"?"locked":"active";k.post(route("admin.users.updateWalletStatus",l),{status:e},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{p();const i=e==="locked"?"Locked":"Active";_.fire("Success!",`Wallet status updated to: ${i}`,"success")}})},A=()=>{c.keyword="",c.page=1,c.get(route("admin.users.index"),{},{preserveState:!0})};return(l,o)=>(m(),f(E,null,{default:a(()=>[s(t(D),{title:"Users"}),s(F,{title:"Users",pageTitle:"Users Management"}),s(t(Y),null,{default:a(()=>[s(t(N),{lg:"12"},{default:a(()=>[s(t(T),{"no-body":""},{default:a(()=>[s(G,{title:"Users List",model:t(c),SearchButton:"true",onGetResourese:p,onReset:A},{actions:a(()=>[s(t(v),{href:l.route("admin.users.create"),class:"btn btn-primary"},{default:a(()=>[R,r(" Add New User ")]),_:1},8,["href"])]),_:1},8,["model"]),s(t(W),null,{default:a(()=>[d("div",j,[d("span",q,[r("Total Users: "),d("strong",null,u(t(n).total),1)])]),d("div",H,[s(t(P),{striped:"",hover:"",items:t(n).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"name",label:"Name",sortable:!0},{key:"phone",label:"Phone",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"balance",label:"Balance",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"wallet_status",label:"Wallet Status",sortable:!0},{key:"created_at",label:"Created At",sortable:!0},{key:"actions",label:"Actions"}],class:"table-nowrap"},{"cell(row_number)":a(({index:e})=>[r(u((t(n).current_page-1)*t(n).per_page+e+1),1)]),"cell(balance)":a(({item:e})=>{var i;return[d("span",I,u(C((i=e.wallet)==null?void 0:i.balance))+" Points",1)]}),"cell(status)":a(({item:e})=>[s(t(w),{variant:e.status==="active"?"success":"danger"},{default:a(()=>[r(u(e.status==="active"?"Active":"Suspended"),1)]),_:2},1032,["variant"])]),"cell(wallet_status)":a(({item:e})=>[e.wallet?(m(),f(t(w),{key:0,variant:e.wallet.status==="active"?"success":"danger"},{default:a(()=>[r(u(e.wallet.status==="active"?"Active":"Locked"),1)]),_:2},1032,["variant"])):(m(),g("span",M,"-"))]),"cell(created_at)":a(({item:e})=>[r(u(h(e.created_at)),1)]),"cell(actions)":a(({item:e})=>[s(t(v),{href:l.route("admin.users.show",e.id),class:"btn btn-info btn-sm me-1"},{default:a(()=>[r(" View ")]),_:2},1032,["href"]),s(t(b),{variant:"warning",size:"sm",class:"me-1",onClick:i=>x(e.id,e.status)},{default:a(()=>[r(u(e.status==="active"?"Suspend":"Activate"),1)]),_:2},1032,["onClick"]),e.wallet?(m(),f(t(b),{key:0,variant:e.wallet.status==="active"?"warning":"success",size:"sm",class:"me-1",onClick:i=>B(e.id,e.wallet.status)},{default:a(()=>[d("i",{class:$(e.wallet.status==="active"?"ri-lock-line":"ri-lock-unlock-line")},null,2),r(" "+u(e.wallet.status==="active"?"Lock Wallet":"Unlock Wallet"),1)]),_:2},1032,["variant","onClick"])):y("",!0),s(t(v),{href:l.route("admin.users.edit",e.id),class:"btn btn-primary btn-sm me-1"},{default:a(()=>[r(" Edit ")]),_:2},1032,["href"]),s(t(b),{variant:"danger",size:"sm",onClick:i=>U(e.id)},{default:a(()=>[r(" Delete ")]),_:2},1032,["onClick"])]),_:1},8,["items"])]),t(n).last_page>1?(m(),g("div",Q,[s(t(z),{modelValue:t(n).current_page,"onUpdate:modelValue":o[0]||(o[0]=e=>t(n).current_page=e),"total-rows":t(n).total,"per-page":t(n).per_page,onPageClick:p},null,8,["modelValue","total-rows","per-page"])])):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{oe as default};
