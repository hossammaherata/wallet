import{s as T}from"./default-bUZHHYfB.js";import{C as Q}from"./component-CHgpe61P.js";/* empty css                  */import{L as j}from"./main-B4G14OJk.js";import{P as H}from"./page-header-DNk6vVyo.js";import{S as O}from"./sweetalert2.all-BmpLc4DV.js";import{ad as k,r as c,c as q,w as n,o as p,a,f as e,h as u,i as b,y as C,d as g,g as A,t as f,n as _,F as D,e as V,v as J}from"./app-DcM7ay-z.js";import{L as Y}from"./lottie-DZXFfg0y.js";import{a as R}from"./msoeawqm-Cg0RqasO.js";import{a as z}from"./gsqxdxog-DrHTRIvl.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./simplebar-vue.esm-Dw2ZmZ-z.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-BfYujB8V.js";import"./russia-pMTSjNGF.js";const Z={data(){return{date1:null,date:null,addCustomerModal:!1,editCustomerModal:!1,rangeDateconfig:{wrap:!0,altFormat:"M j, Y",altInput:!0,dateFormat:"d M, Y",mode:"range"},config:{enableTime:!1,dateFormat:"d M, Y"},searchQuery:null,defaultOptions:{animationData:R},defaultOptions2:{animationData:z},page:1,perPage:8,value:"All",value1:null,pages:[],customerList:[],submitted:!1,dataEdit:!1,deleteModal:!1,event:{_id:"",customer:"",customerId:"",date:"",email:"",phone:"",status:""}}},computed:{displayedPosts(){return this.paginate(this.customerList)},resultQuery(){if(this.searchQuery){const i=this.searchQuery.toLowerCase();return this.displayedPosts.filter(d=>d.customer.toLowerCase().includes(i)||d.email.toLowerCase().includes(i)||d.phone.includes(i)||d.date.toLowerCase().includes(i)||d.status.toLowerCase().includes(i))}else if(this.date!==null){if(this.date!==null)var l=this.date.split(" to ")[0],t=this.date.split(" to ")[1];return this.displayedPosts.filter(i=>new Date(i.date.slice(0,12))>=new Date(l)&&new Date(i.date.slice(0,12))<=new Date(t)?i:null)}else return this.value!==null?this.displayedPosts.filter(i=>i.status===this.value||this.value=="All"?i:null):this.displayedPosts}},created(){this.setPages()},watch:{customerList(){this.setPages()}},filters:{trimWords(l){return l.split(" ").splice(0,20).join(" ")+"..."}},beforeMount(){k.get("https://api-node.themesbrand.website/apps/customer").then(l=>{this.customerList=[],l.data.data.forEach(t=>{const i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var d=new Date(t.date);t.date=d.getDate()+" "+i[d.getMonth()]+", "+d.getFullYear(),this.customerList.push(t)})}).catch(l=>{console.log(l)})},methods:{handleSubmit(){if(this.dataEdit)this.submitted=!0,this.submitted&&this.event.customer&&this.event.email&&this.event.phone&&this.event.date&&this.event.status&&(this.addCustomerModal=!1,k.patch(`https://api-node.themesbrand.website/apps/customer/${this.event._id}`,this.event).then(l=>{const t=l.data.data;this.customerList=this.customerList.map(i=>i._id.toString()==t._id.toString()?{...i,...t}:i)}).catch(l=>{console.log(l)}));else if(this.submitted=!0,this.submitted&&this.event.customer&&this.event.email&&this.event.phone&&this.event.date&&this.event.status){const l={_id:Math.floor(Math.random()*100+20)-20,customerId:"#VZ2"+(Math.floor(Math.random()*100+20)-20),...this.event};this.addCustomerModal=!1,k.post("https://api-node.themesbrand.website/apps/customer",l).then(t=>{this.customerList.unshift(t.data.data)}).catch(t=>{console.log(t)})}},onSort(l){this.direction=this.direction==="asc"?"desc":"asc";const t=[...this.customerList];t.sort((i,d)=>{const s=i[l]<d[l]?-1:i[l]>d[l]?1:0;return this.direction==="asc"?s:-s}),this.customerList=t},editDetails(l){this.dataEdit=!0,this.addCustomerModal=!0,this.event={...l},this.submitted=!1},toggleModal(){this.addCustomerModal=!0,this.dataEdit=!1,this.event={},this.submitted=!1},deleteModalToggle(l){this.deleteModal=!0,this.event._id=l._id},deleteData(){this.event._id&&(k.delete(`https://api-node.themesbrand.website/apps/customer/${this.event._id}`).then(l=>{l.data.status==="success"&&(this.customerList=this.customerList.filter(t=>t._id!=this.event._id))}).catch(l=>{console.log(l)}),this.deleteModal=!1)},setPages(){let l=Math.ceil(this.customerList.length/this.perPage);this.pages=[];for(let t=1;t<=l;t++)this.pages.push(t)},paginate(l){let t=this.page,i=this.perPage,d=t*i-i,s=t*i;return l.slice(d,s)},deleteMultiple(){let l=[];var t=document.getElementsByName("chk_child");if(t.forEach(function(s){if(s.checked==!0){var r=s.parentNode.parentNode.parentNode,B=r.querySelector(".id a").innerHTML;l.push(B)}}),typeof l<"u"&&l.length>0)if(confirm("Are you sure you want to delete this?")){var i=this.customerList;l.forEach(function(s){i=i.filter(function(r){return r.customerId!=s})}),this.customerList=i,document.getElementById("checkAll").checked=!1;var d=document.getElementsByName("chk_child");d.forEach(function(s){s.checked==!0&&(s.checked=!1,s.closest("tr").classList.remove("table-active"))})}else return!1;else O.fire({title:"Please select at least one checkbox",confirmButtonClass:"btn btn-info",buttonsStyling:!1,showCloseButton:!0})},SearchData(){this.value=this.value1}},mounted(){var l=document.getElementById("checkAll");l&&(l.onclick=function(){var i=document.querySelectorAll('.form-check-all input[type="checkbox"]');l.checked==!0?i.forEach(function(d){d.checked=!0,d.closest("tr").classList.add("table-active"),document.getElementById("remove-actions").style.display="block"}):i.forEach(function(d){d.checked=!1,d.closest("tr").classList.remove("table-active"),document.getElementById("remove-actions").style.display="none"})});var t=document.querySelectorAll("#customerTable .form-check-input");Array.from(t).forEach(function(i){i.addEventListener("change",function(d){var s=document.querySelectorAll("#customerTable .form-check-input:checked").length;d.target.closest("tr").classList.contains("table-active"),s>0?document.getElementById("remove-actions").style.display="block":document.getElementById("remove-actions").style.display="none"})})},components:{Layout:j,PageHeader:H,lottie:Y,Multiselect:T,flatPickr:Q}},G=e("div",null,[e("h5",{class:"card-title mb-0"},"Customer List")],-1),K={class:"d-flex flex-wrap align-items-start gap-2"},X=e("i",{class:"ri-delete-bin-2-line"},null,-1),$=e("i",{class:"ri-add-line align-bottom me-1"},null,-1),ee=e("i",{class:"ri-file-download-line align-bottom me-1"},null,-1),te={class:"search-box"},se=e("i",{class:"ri-search-line search-icon"},null,-1),oe={class:""},le=e("i",{class:"ri-equalizer-fill me-2 align-bottom"},null,-1),ae={class:"table-responsive table-card mb-1"},ie={class:"table align-middle",id:"customerTable"},ne={class:"table-light text-muted"},de=e("th",{scope:"col",style:{width:"50px"}},[e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"checkbox",id:"checkAll",value:"option"})])],-1),re=e("th",{class:"sort","data-sort":"action"},"Action",-1),ce={class:"list form-check-all"},ue=e("th",{scope:"row"},[e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"checkbox",name:"chk_child",value:"option1"})])],-1),me={class:"id",style:{display:"none"}},he={class:"customer_name"},fe={class:"email"},pe={class:"phone"},_e={class:"date"},ve={class:"status"},ge={class:"list-inline hstack gap-2 mb-0"},be={class:"list-inline-item edit","data-bs-toggle":"tooltip","data-bs-trigger":"hover","data-bs-placement":"top",title:"Edit"},ye=e("i",{class:"ri-pencil-fill fs-16"},null,-1),ke={class:"list-inline-item","data-bs-toggle":"tooltip","data-bs-trigger":"hover","data-bs-placement":"top",title:"Remove"},Ce=e("i",{class:"ri-delete-bin-5-fill fs-16"},null,-1),Be={key:0,class:"noresult"},Me={class:"text-center"},xe=e("h5",{class:"mt-2"},"Sorry! No Result Found",-1),we=e("p",{class:"text-muted mb-0"}," We've searched more than 150+ customer We did not find any customer for you search. ",-1),Le={key:0,class:"d-flex justify-content-end"},Ee={class:"pagination-wrap hstack gap-2"},Se={class:"pagination listjs-pagination mb-0"},Pe=["onClick"],Ae=e("input",{type:"hidden",id:"id-field"},null,-1),De=e("div",{class:"mb-3",id:"modal-id",style:{display:"none"}},[e("label",{for:"id-field1",class:"form-label"},"ID"),e("input",{type:"text",id:"idfield1",class:"form-control",placeholder:"ID",readonly:""})],-1),Ve={class:"mb-3"},Ie=e("label",{for:"customername-field",class:"form-label"},"Customer Name",-1),Ne=e("div",{class:"invalid-feedback"},"Please enter a customer name.",-1),Fe={class:"mb-3"},Ue=e("label",{for:"email-field",class:"form-label"},"Email",-1),Te=e("div",{class:"invalid-feedback"},"Please enter an email.",-1),Qe={class:"mb-3"},je=e("label",{for:"phone-field",class:"form-label"},"Phone",-1),He=e("div",{class:"invalid-feedback"},"Please enter a phone.",-1),Oe={class:"mb-3"},qe=e("label",{for:"date-field",class:"form-label"},"Joining Date",-1),Je=e("div",{class:"invalid-feedback"},"Please select a date.",-1),Ye={class:"mb-3"},Re=e("label",{for:"status-field",class:"form-label"},"Status",-1),ze=e("option",{value:""},"Status",-1),We=e("option",{value:"Active"},"Active",-1),Ze=e("option",{value:"Block"},"Block",-1),Ge=[ze,We,Ze],Ke=e("div",{class:"invalid-feedback"},"Please select a status.",-1),Xe={class:"hstack gap-2 justify-content-end"},$e={class:"mt-2 text-center"},et=e("div",{class:"mt-4 pt-2 fs-15 mx-4 mx-sm-5"},[e("h4",null,"Are you sure ?"),e("p",{class:"text-muted mx-4 mb-0"},"Are you sure you want to remove this record ?")],-1),tt={class:"d-flex gap-2 justify-content-center mt-4 mb-2"};function st(l,t,i,d,s,r){const B=c("PageHeader"),m=c("BCol"),h=c("BButton"),y=c("BRow"),I=c("BCardHeader"),x=c("flat-pickr"),N=c("Multiselect"),w=c("BFrom"),L=c("BCardBody"),v=c("BLink"),E=c("lottie"),F=c("BCard"),S=c("BModal"),U=c("Layout");return p(),q(U,null,{default:n(()=>[a(B,{title:"Customers",pageTitle:"Ecommerce"}),a(y,null,{default:n(()=>[a(m,{lg:"12"},{default:n(()=>[a(F,{"no-body":"",id:"customerList"},{default:n(()=>[a(I,{class:"border-bottom-dashed"},{default:n(()=>[a(y,{class:"g-4 align-items-center"},{default:n(()=>[a(m,{sm:""},{default:n(()=>[G]),_:1}),a(m,{sm:"auto"},{default:n(()=>[e("div",K,[a(h,{variant:"soft-danger",class:"me-1",id:"remove-actions",onClick:r.deleteMultiple},{default:n(()=>[X]),_:1},8,["onClick"]),a(h,{type:"button",variant:"success",class:"add-btn me-1",id:"create-btn",onClick:r.toggleModal},{default:n(()=>[$,u(" Add Customer ")]),_:1},8,["onClick"]),a(h,{type:"button",variant:"info"},{default:n(()=>[ee,u(" Import ")]),_:1})])]),_:1})]),_:1})]),_:1}),a(L,{class:"border-bottom-dashed border-bottom"},{default:n(()=>[a(w,null,{default:n(()=>[a(y,{class:"g-3"},{default:n(()=>[a(m,{xl:"6"},{default:n(()=>[e("div",te,[b(e("input",{type:"text",class:"form-control search",placeholder:"Search for customer, email, phone, status or something...","onUpdate:modelValue":t[0]||(t[0]=o=>s.searchQuery=o)},null,512),[[C,s.searchQuery]]),se])]),_:1}),a(m,{xl:"6"},{default:n(()=>[a(y,{class:"g-3"},{default:n(()=>[a(m,{sm:"4"},{default:n(()=>[e("div",oe,[a(x,{modelValue:s.date,"onUpdate:modelValue":t[1]||(t[1]=o=>s.date=o),placeholder:"Select date",config:s.rangeDateconfig,class:"form-control"},null,8,["modelValue","config"])])]),_:1}),a(m,{sm:"4"},{default:n(()=>[e("div",null,[a(N,{class:"form-control",modelValue:s.value1,"onUpdate:modelValue":t[2]||(t[2]=o=>s.value1=o),"close-on-select":!0,searchable:!0,"create-option":!0,options:[{value:"",label:"Status",disabled:!0},{value:"All",label:"All"},{value:"Active",label:"Active"},{value:"Block",label:"Block"}]},null,8,["modelValue"])])]),_:1}),a(m,{sm:"4"},{default:n(()=>[e("div",null,[a(h,{type:"button",variant:"primary",class:"w-100",onClick:r.SearchData},{default:n(()=>[le,u("Filters ")]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(L,null,{default:n(()=>[e("div",null,[e("div",ae,[e("table",ie,[e("thead",ne,[e("tr",null,[de,e("th",{class:"sort","data-sort":"customer_name",onClick:t[3]||(t[3]=o=>r.onSort("customer"))},"Customer"),e("th",{class:"sort","data-sort":"email",onClick:t[4]||(t[4]=o=>r.onSort("email"))},"Email"),e("th",{class:"sort","data-sort":"phone",onClick:t[5]||(t[5]=o=>r.onSort("phone"))},"Phone"),e("th",{class:"sort","data-sort":"date",onClick:t[6]||(t[6]=o=>r.onSort("date"))},"Joining Date"),e("th",{class:"sort","data-sort":"status",onClick:t[7]||(t[7]=o=>r.onSort("status"))},"Status"),re])]),e("tbody",ce,[(p(!0),g(D,null,A(r.resultQuery,(o,M)=>(p(),g("tr",{key:M},[ue,e("td",me,[a(v,{href:"javascript:void(0);",class:"fw-medium link-primary"},{default:n(()=>[u(f(o.customerId),1)]),_:2},1024)]),e("td",he,f(o.customer),1),e("td",fe,f(o.email),1),e("td",pe,f(o.phone),1),e("td",_e,f(o.date),1),e("td",ve,[e("span",{class:_(["badge text-uppercase",{"bg-success-subtle text-success":o.status=="Active","bg-danger-subtle text-danger":o.status=="Block"}])},f(o.status),3)]),e("td",null,[e("ul",ge,[e("li",be,[a(v,{variant:"text-primary",class:"d-inline-block edit-item-btn",onClick:P=>r.editDetails(o)},{default:n(()=>[ye]),_:2},1032,["onClick"])]),e("li",ke,[a(v,{class:"text-danger d-inline-block remove-item-btn",onClick:P=>r.deleteModalToggle(o)},{default:n(()=>[Ce]),_:2},1032,["onClick"])])])])]))),128))])]),r.resultQuery.length<1?(p(),g("div",Be,[e("div",Me,[a(E,{class:"avatar-xl",colors:"primary:#121331,secondary:#08a88a",options:s.defaultOptions,height:75,width:75},null,8,["options"]),xe,we])])):V("",!0)]),r.resultQuery.length>=1?(p(),g("div",Le,[e("div",Ee,[a(v,{class:"page-item pagination-prev",href:"#",disabled:s.page<=1,onClick:t[8]||(t[8]=o=>s.page--)},{default:n(()=>[u(" Previous ")]),_:1},8,["disabled"]),e("ul",Se,[(p(!0),g(D,null,A(s.pages,(o,M)=>(p(),g("li",{class:_({active:o==s.page,disabled:o=="..."}),key:M,onClick:P=>s.page=o},[a(v,{class:"page",href:"#"},{default:n(()=>[u(f(o),1)]),_:2},1024)],10,Pe))),128))]),a(v,{class:"page-item pagination-next",href:"#",onClick:t[9]||(t[9]=o=>s.page++),disabled:s.page>=s.pages.length},{default:n(()=>[u(" Next ")]),_:1},8,["disabled"])])])):V("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),a(S,{modelValue:s.addCustomerModal,"onUpdate:modelValue":t[16]||(t[16]=o=>s.addCustomerModal=o),id:"showModal","hide-footer":"",title:s.dataEdit?"Edit Customer":"Add Customer","header-class":"p-3 bg-light",class:"v-modal-custom",centered:""},{default:n(()=>[a(w,{action:"#",id:"addform",class:"tablelist-form",autocomplete:"off"},{default:n(()=>[Ae,De,e("div",Ve,[Ie,b(e("input",{type:"text",id:"customername",class:_(["form-control",{"is-invalid":s.submitted&&!s.event.customer}]),placeholder:"Enter Name","onUpdate:modelValue":t[10]||(t[10]=o=>s.event.customer=o)},null,2),[[C,s.event.customer]]),Ne]),e("div",Fe,[Ue,b(e("input",{type:"email",id:"email",class:_(["form-control",{"is-invalid":s.submitted&&!s.event.email}]),placeholder:"Enter Email","onUpdate:modelValue":t[11]||(t[11]=o=>s.event.email=o)},null,2),[[C,s.event.email]]),Te]),e("div",Qe,[je,b(e("input",{type:"text",id:"phone",class:_(["form-control",{"is-invalid":s.submitted&&!s.event.phone}]),placeholder:"Enter Phone no.","onUpdate:modelValue":t[12]||(t[12]=o=>s.event.phone=o)},null,2),[[C,s.event.phone]]),He]),e("div",Oe,[qe,a(x,{config:s.config,class:_(["form-control",{"is-invalid":s.submitted&&!s.event.date}]),id:"joindate",modelValue:s.event.date,"onUpdate:modelValue":t[13]||(t[13]=o=>s.event.date=o)},null,8,["config","modelValue","class"]),Je]),e("div",Ye,[Re,b(e("select",{class:_(["form-control",{"is-invalid":s.submitted&&!s.event.status}]),"data-trigger":"",id:"statusfield","onUpdate:modelValue":t[14]||(t[14]=o=>s.event.status=o)},Ge,2),[[J,s.event.status]]),Ke]),e("div",Xe,[a(h,{type:"button",id:"closemodal",variant:"light",onClick:t[15]||(t[15]=o=>s.addCustomerModal=!1)},{default:n(()=>[u(" Close ")]),_:1}),a(h,{type:"button",variant:"success",onClick:r.handleSubmit},{default:n(()=>[u(f(s.dataEdit?"Update":"Add Customer"),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),a(S,{modelValue:s.deleteModal,"onUpdate:modelValue":t[18]||(t[18]=o=>s.deleteModal=o),"modal-class":"zoomIn","hide-footer":"","no-close-on-backdrop":"",centered:""},{default:n(()=>[e("div",$e,[a(E,{class:"avatar-xl",colors:"primary:#f7b84b,secondary:#f06548",options:s.defaultOptions2,height:100,width:100},null,8,["options"]),et]),e("div",tt,[a(h,{variant:"light",class:"w-sm",onClick:t[17]||(t[17]=o=>s.deleteModal=!1)},{default:n(()=>[u("Close")]),_:1}),a(h,{variant:"danger",class:"w-sm",id:"delete-record",onClick:r.deleteData},{default:n(()=>[u("Yes, Delete It!")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})}const gt=W(Z,[["render",st]]);export{gt as default};
