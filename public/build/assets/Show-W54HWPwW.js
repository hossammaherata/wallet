import{i as L,Q as U,T as A,c as w,w as n,o as f,a as s,u as t,Z as E,G as u,m as g,v as h,k as y,f as l,t as a,h as m,p as k,n as b,K as F,y as G,e as z,l as P,d as S,A as H}from"./app-BpXjbCMW.js";import{L as I}from"./main-B236rcsx.js";import{P as K}from"./page-header-DEyyf2_K.js";import{_ as v}from"./card-header-Ct8audyA.js";import{_ as Q}from"./FormSection-ARRP3li-.js";import{_ as V}from"./InputError-jV2YQ5AJ.js";import{_ as B}from"./InputLabel-Bt9-yyqx.js";import{_ as T}from"./TextInput-CyoGix6i.js";import{S as $}from"./sweetalert2.all-BXeenfYg.js";import"./simplebar-vue.esm-Ds3EkmLx.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-Bc94pPwb.js";import"./us-DIspYScJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"text-center p-3 bg-light rounded"},j={class:"text-muted mb-1"},q={class:"mb-0"},J={class:"text-center p-3 bg-light rounded"},M={class:"text-muted mb-1"},O={class:"mb-0"},R={class:"text-center p-3 bg-light rounded"},W={class:"text-muted mb-1"},X={class:"mb-0"},Y={class:"text-center p-3 bg-light rounded"},tt={class:"text-muted mb-1"},et={class:"mb-3"},st={class:"mb-3"},at={class:"text-muted"},nt={class:"text-success"},lt={key:0},ot={key:1},rt={class:"mt-3"},kt={__name:"Show",setup(it){const{t:e}=L(),{ticket:i,statistics:c}=U().props,r=A({phone:"",prize_amount:""}),x=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),p=d=>parseFloat(d||0).toFixed(2),D=d=>({active:"success",completed:"info",cancelled:"danger"})[d]||"secondary",N=d=>({active:e("t-active"),completed:e("t-completed"),cancelled:e("t-cancelled")})[d]||d,C=()=>{r.post(route("prize-manager.tickets.add-winner",i.id),{preserveScroll:!0,onSuccess:()=>{r.reset(),$.fire({icon:"success",title:e("t-success-message"),text:e("t-winner-added")})},onError:()=>{$.fire({icon:"error",title:e("t-error-message"),text:e("t-error-adding-winner")})}})};return(d,_)=>(f(),w(I,null,{default:n(()=>[s(t(E),{title:t(e)("t-ticket-details")},null,8,["title"]),s(K,{title:t(e)("t-ticket-details"),pageTitle:t(e)("t-available-prizes-today"),href:d.route("prize-manager.dashboard")},null,8,["title","pageTitle","href"]),s(t(y),null,{default:n(()=>[s(t(u),{lg:"12"},{default:n(()=>[s(t(g),{"no-body":"",class:"mb-4"},{default:n(()=>[s(v,{title:t(e)("t-prize-information")},null,8,["title"]),s(t(h),null,{default:n(()=>[s(t(y),null,{default:n(()=>[s(t(u),{md:"4"},{default:n(()=>[l("strong",null,a(t(e)("t-prize-name"))+":",1),m(" "+a(t(i).prize.name),1)]),_:1}),s(t(u),{md:"4"},{default:n(()=>[l("strong",null,a(t(e)("t-ticket-date"))+":",1),m(" "+a(x(t(i).date)),1)]),_:1}),s(t(u),{md:"4"},{default:n(()=>[l("strong",null,a(t(e)("t-prize-status"))+":",1),s(t(k),{variant:D(t(i).status),class:"ms-2"},{default:n(()=>[m(a(N(t(i).status)),1)]),_:1},8,["variant"])]),_:1})]),_:1})]),_:1})]),_:1}),s(t(g),{"no-body":"",class:"mb-4"},{default:n(()=>[s(v,{title:t(e)("t-statistics")},null,8,["title"]),s(t(h),null,{default:n(()=>[s(t(y),null,{default:n(()=>[s(t(u),{md:"3"},{default:n(()=>[l("div",Z,[l("h5",j,a(t(e)("t-total-winners")),1),l("h3",q,a(t(i).total_winners),1)])]),_:1}),s(t(u),{md:"3"},{default:n(()=>[l("div",J,[l("h5",M,a(t(e)("t-current-winners-count")),1),l("h3",O,a(t(c).current_winners_count),1)])]),_:1}),s(t(u),{md:"3"},{default:n(()=>[l("div",R,[l("h5",W,a(t(e)("t-total-amount")),1),l("h3",X,a(p(t(i).total_amount))+" "+a(t(e)("t-points")),1)])]),_:1}),s(t(u),{md:"3"},{default:n(()=>[l("div",Y,[l("h5",tt,a(t(e)("t-remaining-amount")),1),l("h3",{class:b(["mb-0",t(c).remaining_amount>0?"text-success":"text-danger"])},a(p(t(c).remaining_amount))+" "+a(t(e)("t-points")),3)])]),_:1})]),_:1})]),_:1})]),_:1}),t(i).status==="active"&&t(c).remaining_winners>0&&t(c).remaining_amount>0?(f(),w(t(g),{key:0,"no-body":"",class:"mb-4"},{default:n(()=>[s(v,{title:t(e)("t-add-winner")},null,8,["title"]),s(t(h),null,{default:n(()=>[s(t(F),{variant:"info",show:"",class:"mb-3"},{default:n(()=>[l("strong",null,a(t(e)("t-note"))+":",1),m(" "+a(t(e)("t-add-winner-note"))+" "+a(t(e)("t-remaining-amount"))+": ",1),l("strong",null,a(p(t(c).remaining_amount))+" "+a(t(e)("t-points")),1),m(" | "+a(t(e)("t-remaining-winners"))+": ",1),l("strong",null,a(t(c).remaining_winners),1)]),_:1}),s(Q,{onSubmitted:C},{form:n(()=>[l("div",et,[s(B,{for:"phone",value:t(e)("t-phone-number")},null,8,["value"]),s(T,{id:"phone",modelValue:t(r).phone,"onUpdate:modelValue":_[0]||(_[0]=o=>t(r).phone=o),type:"text",class:b(["mt-1 block w-full",{"is-invalid":t(r).errors.phone}]),placeholder:t(e)("t-example")+": 0501234567"},null,8,["modelValue","class","placeholder"]),s(V,{message:t(r).errors.phone,class:"mt-2"},null,8,["message"])]),l("div",st,[s(B,{for:"prize_amount",value:t(e)("t-prize-amount-value")},null,8,["value"]),s(T,{id:"prize_amount",modelValue:t(r).prize_amount,"onUpdate:modelValue":_[1]||(_[1]=o=>t(r).prize_amount=o),type:"number",step:"0.01",min:"0.01",max:t(c).remaining_amount,class:b(["mt-1 block w-full",{"is-invalid":t(r).errors.prize_amount}]),placeholder:t(e)("t-example")+": 100"},null,8,["modelValue","max","class","placeholder"]),s(V,{message:t(r).errors.prize_amount,class:"mt-2"},null,8,["message"]),l("small",at,a(t(e)("t-max-amount"))+": "+a(p(t(c).remaining_amount))+" "+a(t(e)("t-points")),1)])]),actions:n(()=>[s(t(G),{variant:"primary",type:"submit",class:b({"opacity-25":t(r).processing}),disabled:t(r).processing},{default:n(()=>[m(a(t(e)("t-add-winner")),1)]),_:1},8,["class","disabled"])]),_:1})]),_:1})]),_:1})):z("",!0),t(i).winners&&t(i).winners.length>0?(f(),w(t(g),{key:1,"no-body":"",class:"mb-4"},{default:n(()=>[s(v,{title:t(e)("t-winners-list")},null,8,["title"]),s(t(h),null,{default:n(()=>[s(t(P),{items:t(i).winners,fields:[{key:"phone",label:t(e)("t-winner-phone")},{key:"user.name",label:t(e)("t-winner-name")},{key:"prize_amount",label:t(e)("t-prize-amount")},{key:"transaction_id",label:t(e)("t-transaction-number")},{key:"status",label:t(e)("t-prize-status")},{key:"created_at",label:t(e)("t-added-date")}],striped:"",hover:"",responsive:""},{"cell(prize_amount)":n(({item:o})=>[l("strong",nt,a(p(o.prize_amount))+" "+a(t(e)("t-points")),1)]),"cell(transaction_id)":n(({item:o})=>[o.transaction_id?(f(),S("span",lt,"#"+a(o.transaction_id),1)):(f(),S("span",ot,"-"))]),"cell(status)":n(({item:o})=>[s(t(k),{variant:o.status==="success"?"success":"danger"},{default:n(()=>[m(a(o.status==="success"?t(e)("t-success"):t(e)("t-failed")),1)]),_:2},1032,["variant"])]),"cell(created_at)":n(({item:o})=>[m(a(x(o.created_at)),1)]),_:1},8,["items","fields"])]),_:1})]),_:1})):z("",!0),l("div",rt,[s(t(H),{href:d.route("prize-manager.dashboard"),class:"btn btn-secondary"},{default:n(()=>[m(a(t(e)("t-back-to-list")),1)]),_:1},8,["href"])])]),_:1})]),_:1})]),_:1}))}};export{kt as default};
