import{i as z,Q as D,T as N,c as v,w as s,o as _,a as l,u as e,Z as F,G,m as L,A as b,h as n,t as o,v as P,f as p,l as R,p as g,d as y,y as w,n as I,e as h,Y as U,k as W,q as k}from"./app-BpXjbCMW.js";import{L as Y}from"./main-B236rcsx.js";import{P as j}from"./page-header-DEyyf2_K.js";import{_ as q}from"./card-header-Ct8audyA.js";import{S as f}from"./sweetalert2.all-BXeenfYg.js";import"./simplebar-vue.esm-Ds3EkmLx.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-Bc94pPwb.js";import"./us-DIspYScJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A=p("i",{class:"ri-add-line align-middle me-1"},null,-1),E={class:"mb-3"},H={class:"text-muted"},Q={class:"table-responsive"},Z={class:"fw-bold"},J={key:1,class:"text-muted"},K={key:0,class:"d-flex justify-content-center mt-3"},ce={__name:"Index",setup(M){const{t}=z(),{stores:u,keyword:S}=D().props,i=N({page:1,keyword:S||""}),m=(r,c)=>{i.page=c||i.page,i.get(route("admin.stores.index"),{},{preserveState:!0})},C=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),x=r=>parseFloat(r||0).toFixed(2),B=r=>{f.fire({title:t("t-are-you-sure"),text:t("t-wont-be-able-to-revert"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:t("t-yes-delete-it")}).then(c=>{c.isConfirmed&&k.delete(route("admin.stores.destroy",r),{onSuccess:()=>{m(),f.fire(t("t-deleted"),t("t-store-has-been-deleted"),"success")}})})},V=(r,c)=>{const a=c==="active"?"suspended":"active";k.post(route("admin.stores.updateStatus",r),{status:a},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{m(),f.fire(t("t-success"),t("t-store-status-updated"),"success")}})},T=(r,c)=>{const a=c==="active"?"locked":"active";k.post(route("admin.stores.updateWalletStatus",r),{status:a},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{m();const d=t(a==="locked"?"t-locked":"t-active");f.fire(t("t-success"),`${t("t-wallet-status-updated")} ${d}`,"success")}})},$=()=>{i.keyword="",i.page=1,i.get(route("admin.stores.index"),{},{preserveState:!0})};return(r,c)=>(_(),v(Y,null,{default:s(()=>[l(e(F),{title:e(t)("t-stores")},null,8,["title"]),l(j,{title:e(t)("t-stores"),pageTitle:e(t)("t-stores-management")},null,8,["title","pageTitle"]),l(e(W),null,{default:s(()=>[l(e(G),{lg:"12"},{default:s(()=>[l(e(L),{"no-body":""},{default:s(()=>[l(q,{title:e(t)("t-stores-list"),model:e(i),SearchButton:"true",onGetResourese:m,onReset:$},{actions:s(()=>[l(e(b),{href:r.route("admin.stores.create"),class:"btn btn-primary"},{default:s(()=>[A,n(" "+o(e(t)("t-add-new-store")),1)]),_:1},8,["href"])]),_:1},8,["title","model"]),l(e(P),null,{default:s(()=>[p("div",E,[p("span",H,[n(o(e(t)("t-total-stores"))+": ",1),p("strong",null,o(e(u).total),1)])]),p("div",Q,[l(e(R),{striped:"",hover:"",items:e(u).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"name",label:e(t)("t-store-name"),sortable:!0},{key:"phone",label:e(t)("t-phone"),sortable:!0},{key:"email",label:e(t)("t-email"),sortable:!0},{key:"balance",label:e(t)("t-balance"),sortable:!0},{key:"status",label:e(t)("t-status"),sortable:!0},{key:"wallet_status",label:e(t)("t-wallet-status"),sortable:!0},{key:"created_at",label:e(t)("t-created-at"),sortable:!0},{key:"actions",label:e(t)("t-actions")}],class:"table-nowrap"},{"cell(row_number)":s(({index:a})=>[n(o((e(u).current_page-1)*e(u).per_page+a+1),1)]),"cell(balance)":s(({item:a})=>{var d;return[p("span",Z,o(x((d=a.wallet)==null?void 0:d.balance))+" "+o(e(t)("t-points")),1)]}),"cell(status)":s(({item:a})=>[l(e(g),{variant:a.status==="active"?"success":"danger"},{default:s(()=>[n(o(a.status==="active"?e(t)("t-active"):e(t)("t-suspended")),1)]),_:2},1032,["variant"])]),"cell(wallet_status)":s(({item:a})=>[a.wallet?(_(),v(e(g),{key:0,variant:a.wallet.status==="active"?"success":"danger"},{default:s(()=>[n(o(a.wallet.status==="active"?e(t)("t-active"):e(t)("t-locked")),1)]),_:2},1032,["variant"])):(_(),y("span",J,"-"))]),"cell(created_at)":s(({item:a})=>[n(o(C(a.created_at)),1)]),"cell(actions)":s(({item:a})=>[l(e(b),{href:r.route("admin.stores.show",a.id),class:"btn btn-outline-primary btn-sm me-1"},{default:s(()=>[n(o(e(t)("t-view")),1)]),_:2},1032,["href"]),l(e(b),{href:r.route("admin.stores.edit",a.id),class:"btn btn-outline-primary btn-sm me-1"},{default:s(()=>[n(o(e(t)("t-edit")),1)]),_:2},1032,["href"]),l(e(w),{variant:"outline-warning",size:"sm",class:"me-1",onClick:d=>V(a.id,a.status)},{default:s(()=>[n(o(a.status==="active"?e(t)("t-suspend"):e(t)("t-activate")),1)]),_:2},1032,["onClick"]),a.wallet?(_(),v(e(w),{key:0,variant:a.wallet.status==="active"?"outline-warning":"outline-success",size:"sm",class:"me-1",onClick:d=>T(a.id,a.wallet.status)},{default:s(()=>[p("i",{class:I(a.wallet.status==="active"?"ri-lock-line":"ri-lock-unlock-line")},null,2),n(" "+o(a.wallet.status==="active"?e(t)("t-lock-wallet"):e(t)("t-unlock-wallet")),1)]),_:2},1032,["variant","onClick"])):h("",!0),l(e(w),{variant:"outline-danger",size:"sm",onClick:d=>B(a.id)},{default:s(()=>[n(o(e(t)("t-delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["items","fields"])]),e(u).last_page>1?(_(),y("div",K,[l(e(U),{modelValue:e(u).current_page,"onUpdate:modelValue":c[0]||(c[0]=a=>e(u).current_page=a),"total-rows":e(u).total,"per-page":e(u).per_page,onPageClick:m},null,8,["modelValue","total-rows","per-page"])])):h("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ce as default};
