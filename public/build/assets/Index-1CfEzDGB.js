import{Q as C,T as P,c as v,w as s,o as m,a as o,u as e,Z as U,G as _,m as B,k as N,f as t,l as b,i as y,y as h,z as k,p as w,h as d,t as i,q as R,d as f,s as g,j as L,Y as I,e as M}from"./app-DcM7ay-z.js";import{L as Y}from"./main-B4G14OJk.js";import{P as j}from"./page-header-DNk6vVyo.js";import{_ as z}from"./card-header-CbzQO_FG.js";import"./simplebar-vue.esm-Dw2ZmZ-z.js";import"./logo-dark-BbIT5rJd.js";import"./logo-light-BfYujB8V.js";import"./russia-pMTSjNGF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"mb-4"},G={class:"mb-3"},q=t("label",{class:"form-label"},"Search",-1),H={class:"mb-3"},Q=t("label",{class:"form-label"},"Status",-1),Z=t("option",{value:""},"All",-1),$=t("option",{value:"success"},"Success",-1),J=t("option",{value:"pending"},"Pending",-1),K=t("option",{value:"failed"},"Failed",-1),O={class:"mb-3"},W=t("label",{class:"form-label"},"Type",-1),X=t("option",{value:""},"All",-1),ee=t("option",{value:"purchase"},"Purchase",-1),te=t("option",{value:"transfer"},"Transfer",-1),ae=t("option",{value:"credit"},"Credit",-1),se=t("option",{value:"debit"},"Debit",-1),oe=t("option",{value:"refund"},"Refund",-1),le={class:"mb-3"},ne=t("label",{class:"form-label"},"Date From",-1),re={class:"mb-3"},de=t("label",{class:"form-label"},"Date To",-1),ie={class:"mb-3"},ue=t("i",{class:"ri-search-line me-1"},null,-1),ce=t("i",{class:"ri-refresh-line me-1"},null,-1),_e={class:"mb-3"},me={class:"text-muted"},pe={class:"table-responsive"},fe={key:0},be=t("br",null,null,-1),ye={class:"text-muted"},he={key:0},ge=t("br",null,null,-1),ve={class:"text-muted"},ke={key:1,class:"text-muted"},we={class:"fw-bold"},Te={key:0,class:"d-flex justify-content-center mt-3"},Ne={__name:"Index",setup(Ve){const{transactions:c,filters:r}=C().props,l=P({page:1,keyword:(r==null?void 0:r.keyword)||"",status:(r==null?void 0:r.status)||"",type:(r==null?void 0:r.type)||"",date_from:(r==null?void 0:r.date_from)||"",date_to:(r==null?void 0:r.date_to)||""}),T=(u,n)=>{l.page=n||l.page,l.get(route("admin.transactions.index"),{},{preserveState:!0})},V=()=>{l.page=1,l.get(route("admin.transactions.index"),{},{preserveState:!0})},x=()=>{l.keyword="",l.status="",l.type="",l.date_from="",l.date_to="",l.page=1,l.get(route("admin.transactions.index"),{},{preserveState:!0})},S=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=u=>parseFloat(u||0).toFixed(2),F=u=>({success:"success",pending:"warning",failed:"danger"})[u]||"secondary",A=u=>({purchase:"primary",transfer:"info",credit:"success",debit:"danger",refund:"warning"})[u]||"secondary";return(u,n)=>(m(),v(Y,null,{default:s(()=>[o(e(U),{title:"Transactions"}),o(j,{title:"Transactions",pageTitle:"Transactions Management"}),o(e(b),null,{default:s(()=>[o(e(_),{lg:"12"},{default:s(()=>[o(e(B),{"no-body":""},{default:s(()=>[o(z,{title:"Transactions List"}),o(e(N),null,{default:s(()=>[t("div",E,[o(e(b),null,{default:s(()=>[o(e(_),{md:"3"},{default:s(()=>[t("div",G,[q,y(t("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>e(l).keyword=a),type:"text",class:"form-control",placeholder:"Reference ID, Name, Phone..."},null,512),[[h,e(l).keyword]])])]),_:1}),o(e(_),{md:"2"},{default:s(()=>[t("div",H,[Q,o(e(k),{modelValue:e(l).status,"onUpdate:modelValue":n[1]||(n[1]=a=>e(l).status=a)},{default:s(()=>[Z,$,J,K]),_:1},8,["modelValue"])])]),_:1}),o(e(_),{md:"2"},{default:s(()=>[t("div",O,[W,o(e(k),{modelValue:e(l).type,"onUpdate:modelValue":n[2]||(n[2]=a=>e(l).type=a)},{default:s(()=>[X,ee,te,ae,se,oe]),_:1},8,["modelValue"])])]),_:1}),o(e(_),{md:"2"},{default:s(()=>[t("div",le,[ne,y(t("input",{"onUpdate:modelValue":n[3]||(n[3]=a=>e(l).date_from=a),type:"date",class:"form-control"},null,512),[[h,e(l).date_from]])])]),_:1}),o(e(_),{md:"2"},{default:s(()=>[t("div",re,[de,y(t("input",{"onUpdate:modelValue":n[4]||(n[4]=a=>e(l).date_to=a),type:"date",class:"form-control"},null,512),[[h,e(l).date_to]])])]),_:1})]),_:1}),o(e(b),null,{default:s(()=>[o(e(_),{md:"12"},{default:s(()=>[t("div",ie,[o(e(w),{variant:"primary",onClick:V,class:"me-2"},{default:s(()=>[ue,d(" Apply Filters ")]),_:1}),o(e(w),{variant:"secondary",onClick:x},{default:s(()=>[ce,d(" Reset ")]),_:1})])]),_:1})]),_:1})]),t("div",_e,[t("span",me,[d("Total Transactions: "),t("strong",null,i(e(c).total),1)])]),t("div",pe,[o(e(R),{striped:"",hover:"",items:e(c).data,fields:[{key:"row_number",label:"#",sortable:!1},{key:"reference_id",label:"Reference ID",sortable:!0},{key:"from_user",label:"From",sortable:!1},{key:"to_user",label:"To",sortable:!1},{key:"amount",label:"Amount",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"created_at",label:"Created At",sortable:!0},{key:"actions",label:"Actions"}],class:"table-nowrap"},{"cell(row_number)":s(({index:a})=>[d(i((e(c).current_page-1)*e(c).per_page+a+1),1)]),"cell(reference_id)":s(({item:a})=>[t("code",null,i(a.reference_id),1)]),"cell(from_user)":s(({item:a})=>{var p;return[(p=a.from_wallet)!=null&&p.user?(m(),f("span",fe,[d(i(a.from_wallet.user.name),1),be,t("small",ye,i(a.from_wallet.user.phone),1)])):(m(),v(e(g),{key:1,variant:"secondary"},{default:s(()=>[d("SYSTEM")]),_:1}))]}),"cell(to_user)":s(({item:a})=>{var p;return[(p=a.to_wallet)!=null&&p.user?(m(),f("span",he,[d(i(a.to_wallet.user.name),1),ge,t("small",ve,i(a.to_wallet.user.phone),1)])):(m(),f("span",ke,"-"))]}),"cell(amount)":s(({item:a})=>[t("span",we,i(D(a.amount))+" Points",1)]),"cell(type)":s(({item:a})=>[o(e(g),{variant:A(a.type)},{default:s(()=>[d(i(a.type),1)]),_:2},1032,["variant"])]),"cell(status)":s(({item:a})=>[o(e(g),{variant:F(a.status)},{default:s(()=>[d(i(a.status),1)]),_:2},1032,["variant"])]),"cell(created_at)":s(({item:a})=>[d(i(S(a.created_at)),1)]),"cell(actions)":s(({item:a})=>[o(e(L),{href:u.route("admin.transactions.show",a.id),class:"btn btn-info btn-sm"},{default:s(()=>[d(" View ")]),_:2},1032,["href"])]),_:1},8,["items"])]),e(c).last_page>1?(m(),f("div",Te,[o(e(I),{modelValue:e(c).current_page,"onUpdate:modelValue":n[5]||(n[5]=a=>e(c).current_page=a),"total-rows":e(c).total,"per-page":e(c).per_page,onPageClick:T},null,8,["modelValue","total-rows","per-page"])])):M("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Ne as default};
